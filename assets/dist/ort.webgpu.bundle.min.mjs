/*!
 * ONNX Runtime Web v1.23.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var Kr=Object.defineProperty;var Uy=Object.getOwnPropertyDescriptor;var Dy=Object.getOwnPropertyNames;var Py=Object.prototype.hasOwnProperty;var en=(f=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(f,{get:(a,l)=>(typeof require<"u"?require:a)[l]}):f)(function(f){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+f+'" is not supported')});var q=(f,a)=>()=>(f&&(a=f(f=0)),a);var Ct=(f,a)=>{for(var l in a)Kr(f,l,{get:a[l],enumerable:!0})},_y=(f,a,l,p)=>{if(a&&typeof a=="object"||typeof a=="function")for(let d of Dy(a))!Py.call(f,d)&&d!==l&&Kr(f,d,{get:()=>a[d],enumerable:!(p=Uy(a,d))||p.enumerable});return f};var Xt=f=>_y(Kr({},"__esModule",{value:!0}),f);var Zt,at,it,ky,Yu,tn=q(()=>{"use strict";Zt=new Map,at=[],it=(f,a,l)=>{if(a&&typeof a.init=="function"&&typeof a.createInferenceSessionHandler=="function"){let p=Zt.get(f);if(p===void 0)Zt.set(f,{backend:a,priority:l});else{if(p.priority>l)return;if(p.priority===l&&p.backend!==a)throw new Error(`cannot register backend "${f}" using priority ${l}`)}if(l>=0){let d=at.indexOf(f);d!==-1&&at.splice(d,1);for(let v=0;v<at.length;v++)if(Zt.get(at[v]).priority<=l){at.splice(v,0,f);return}at.push(f)}return}throw new TypeError("not a valid backend")},ky=async f=>{let a=Zt.get(f);if(!a)return"backend not found.";if(a.initialized)return a.backend;if(a.aborted)return a.error;{let l=!!a.initPromise;try{return l||(a.initPromise=a.backend.init(f)),await a.initPromise,a.initialized=!0,a.backend}catch(p){return l||(a.error=`${p}`,a.aborted=!0),a.error}finally{delete a.initPromise}}},Yu=async f=>{let a=f.executionProviders||[],l=a.map(I=>typeof I=="string"?I:I.name),p=l.length===0?at:l,d,v=[],E=new Set;for(let I of p){let L=await ky(I);typeof L=="string"?v.push({name:I,err:L}):(d||(d=L),d===L&&E.add(I))}if(!d)throw new Error(`no available backend found. ERR: ${v.map(I=>`[${I.name}] ${I.err}`).join(", ")}`);for(let{name:I,err:L}of v)l.includes(I)&&console.warn(`removing requested execution provider "${I}" from session options because it is not available: ${L}`);let S=a.filter(I=>E.has(typeof I=="string"?I:I.name));return[d,new Proxy(f,{get:(I,L)=>L==="executionProviders"?S:Reflect.get(I,L)})]}});var Ju=q(()=>{"use strict";tn()});var Xu,Zu=q(()=>{"use strict";Xu="1.23.0"});var Qu,me,rn=q(()=>{"use strict";Zu();Qu="warning",me={wasm:{},webgl:{},webgpu:{},versions:{common:Xu},set logLevel(f){if(f!==void 0){if(typeof f!="string"||["verbose","info","warning","error","fatal"].indexOf(f)===-1)throw new Error(`Unsupported logging level: ${f}`);Qu=f}},get logLevel(){return Qu}};Object.defineProperty(me,"logLevel",{enumerable:!0})});var se,Ku=q(()=>{"use strict";rn();se=me});var ef,tf,rf=q(()=>{"use strict";ef=(f,a)=>{let l=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);l.width=f.dims[3],l.height=f.dims[2];let p=l.getContext("2d");if(p!=null){let d,v;a?.tensorLayout!==void 0&&a.tensorLayout==="NHWC"?(d=f.dims[2],v=f.dims[3]):(d=f.dims[3],v=f.dims[2]);let E=a?.format!==void 0?a.format:"RGB",S=a?.norm,I,L;S===void 0||S.mean===void 0?I=[255,255,255,255]:typeof S.mean=="number"?I=[S.mean,S.mean,S.mean,S.mean]:(I=[S.mean[0],S.mean[1],S.mean[2],0],S.mean[3]!==void 0&&(I[3]=S.mean[3])),S===void 0||S.bias===void 0?L=[0,0,0,0]:typeof S.bias=="number"?L=[S.bias,S.bias,S.bias,S.bias]:(L=[S.bias[0],S.bias[1],S.bias[2],0],S.bias[3]!==void 0&&(L[3]=S.bias[3]));let B=v*d,C=0,M=B,_=B*2,F=-1;E==="RGBA"?(C=0,M=B,_=B*2,F=B*3):E==="RGB"?(C=0,M=B,_=B*2):E==="RBG"&&(C=0,_=B,M=B*2);for(let V=0;V<v;V++)for(let K=0;K<d;K++){let G=(f.data[C++]-L[0])*I[0],W=(f.data[M++]-L[1])*I[1],re=(f.data[_++]-L[2])*I[2],z=F===-1?255:(f.data[F++]-L[3])*I[3];p.fillStyle="rgba("+G+","+W+","+re+","+z+")",p.fillRect(K,V,1,1)}if("toDataURL"in l)return l.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},tf=(f,a)=>{let l=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),p;if(l!=null){let d,v,E;a?.tensorLayout!==void 0&&a.tensorLayout==="NHWC"?(d=f.dims[2],v=f.dims[1],E=f.dims[3]):(d=f.dims[3],v=f.dims[2],E=f.dims[1]);let S=a!==void 0&&a.format!==void 0?a.format:"RGB",I=a?.norm,L,B;I===void 0||I.mean===void 0?L=[255,255,255,255]:typeof I.mean=="number"?L=[I.mean,I.mean,I.mean,I.mean]:(L=[I.mean[0],I.mean[1],I.mean[2],255],I.mean[3]!==void 0&&(L[3]=I.mean[3])),I===void 0||I.bias===void 0?B=[0,0,0,0]:typeof I.bias=="number"?B=[I.bias,I.bias,I.bias,I.bias]:(B=[I.bias[0],I.bias[1],I.bias[2],0],I.bias[3]!==void 0&&(B[3]=I.bias[3]));let C=v*d;if(a!==void 0&&(a.format!==void 0&&E===4&&a.format!=="RGBA"||E===3&&a.format!=="RGB"&&a.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let M=4,_=0,F=1,V=2,K=3,G=0,W=C,re=C*2,z=-1;S==="RGBA"?(G=0,W=C,re=C*2,z=C*3):S==="RGB"?(G=0,W=C,re=C*2):S==="RBG"&&(G=0,re=C,W=C*2),p=l.createImageData(d,v);for(let Q=0;Q<v*d;_+=M,F+=M,V+=M,K+=M,Q++)p.data[_]=(f.data[G++]-B[0])*L[0],p.data[F]=(f.data[W++]-B[1])*L[1],p.data[V]=(f.data[re++]-B[2])*L[2],p.data[K]=z===-1?255:(f.data[z++]-B[3])*L[3]}else throw new Error("Can not access image data");return p}});var nn,nf,of,af,sf,uf,ff=q(()=>{"use strict";Qt();nn=(f,a)=>{if(f===void 0)throw new Error("Image buffer must be defined");if(a.height===void 0||a.width===void 0)throw new Error("Image height and width must be defined");if(a.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:l,width:p}=a,d=a.norm??{mean:255,bias:0},v,E;typeof d.mean=="number"?v=[d.mean,d.mean,d.mean,d.mean]:v=[d.mean[0],d.mean[1],d.mean[2],d.mean[3]??255],typeof d.bias=="number"?E=[d.bias,d.bias,d.bias,d.bias]:E=[d.bias[0],d.bias[1],d.bias[2],d.bias[3]??0];let S=a.format!==void 0?a.format:"RGBA",I=a.tensorFormat!==void 0&&a.tensorFormat!==void 0?a.tensorFormat:"RGB",L=l*p,B=I==="RGBA"?new Float32Array(L*4):new Float32Array(L*3),C=4,M=0,_=1,F=2,V=3,K=0,G=L,W=L*2,re=-1;S==="RGB"&&(C=3,M=0,_=1,F=2,V=-1),I==="RGBA"?re=L*3:I==="RBG"?(K=0,W=L,G=L*2):I==="BGR"&&(W=0,G=L,K=L*2);for(let Q=0;Q<L;Q++,M+=C,F+=C,_+=C,V+=C)B[K++]=(f[M]+E[0])/v[0],B[G++]=(f[_]+E[1])/v[1],B[W++]=(f[F]+E[2])/v[2],re!==-1&&V!==-1&&(B[re++]=(f[V]+E[3])/v[3]);return I==="RGBA"?new we("float32",B,[1,4,l,p]):new we("float32",B,[1,3,l,p])},nf=async(f,a)=>{let l=typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement,p=typeof ImageData<"u"&&f instanceof ImageData,d=typeof ImageBitmap<"u"&&f instanceof ImageBitmap,v=typeof f=="string",E,S=a??{},I=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},L=B=>typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||B instanceof OffscreenCanvas?B.getContext("2d"):null;if(l){let B=I();B.width=f.width,B.height=f.height;let C=L(B);if(C!=null){let M=f.height,_=f.width;if(a!==void 0&&a.resizedHeight!==void 0&&a.resizedWidth!==void 0&&(M=a.resizedHeight,_=a.resizedWidth),a!==void 0){if(S=a,a.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");S.tensorFormat="RGBA",S.height=M,S.width=_}else S.tensorFormat="RGBA",S.height=M,S.width=_;C.drawImage(f,0,0),E=C.getImageData(0,0,_,M).data}else throw new Error("Can not access image data")}else if(p){let B,C;if(a!==void 0&&a.resizedWidth!==void 0&&a.resizedHeight!==void 0?(B=a.resizedHeight,C=a.resizedWidth):(B=f.height,C=f.width),a!==void 0&&(S=a),S.format="RGBA",S.height=B,S.width=C,a!==void 0){let M=I();M.width=C,M.height=B;let _=L(M);if(_!=null)_.putImageData(f,0,0),E=_.getImageData(0,0,C,B).data;else throw new Error("Can not access image data")}else E=f.data}else if(d){if(a===void 0)throw new Error("Please provide image config with format for Imagebitmap");let B=I();B.width=f.width,B.height=f.height;let C=L(B);if(C!=null){let M=f.height,_=f.width;return C.drawImage(f,0,0,_,M),E=C.getImageData(0,0,_,M).data,S.height=M,S.width=_,nn(E,S)}else throw new Error("Can not access image data")}else{if(v)return new Promise((B,C)=>{let M=I(),_=L(M);if(!f||!_)return C();let F=new Image;F.crossOrigin="Anonymous",F.src=f,F.onload=()=>{M.width=F.width,M.height=F.height,_.drawImage(F,0,0,M.width,M.height);let V=_.getImageData(0,0,M.width,M.height);S.height=M.height,S.width=M.width,B(nn(V.data,S))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(E!==void 0)return nn(E,S);throw new Error("Input data provided is not supported - aborted tensor creation")},of=(f,a)=>{let{width:l,height:p,download:d,dispose:v}=a,E=[1,p,l,4];return new we({location:"texture",type:"float32",texture:f,dims:E,download:d,dispose:v})},af=(f,a)=>{let{dataType:l,dims:p,download:d,dispose:v}=a;return new we({location:"gpu-buffer",type:l??"float32",gpuBuffer:f,dims:p,download:d,dispose:v})},sf=(f,a)=>{let{dataType:l,dims:p,download:d,dispose:v}=a;return new we({location:"ml-tensor",type:l??"float32",mlTensor:f,dims:p,download:d,dispose:v})},uf=(f,a,l)=>new we({location:"cpu-pinned",type:f,data:a,dims:l??[a.length]})});var st,Ut,cf,lf,df=q(()=>{"use strict";st=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Ut=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),cf=!1,lf=()=>{if(!cf){cf=!0;let f=typeof BigInt64Array<"u"&&BigInt64Array.from,a=typeof BigUint64Array<"u"&&BigUint64Array.from,l=globalThis.Float16Array,p=typeof l<"u"&&l.from;f&&(st.set("int64",BigInt64Array),Ut.set(BigInt64Array,"int64")),a&&(st.set("uint64",BigUint64Array),Ut.set(BigUint64Array,"uint64")),p?(st.set("float16",l),Ut.set(l,"float16")):st.set("float16",Uint16Array)}}});var pf,hf,mf=q(()=>{"use strict";Qt();pf=f=>{let a=1;for(let l=0;l<f.length;l++){let p=f[l];if(typeof p!="number"||!Number.isSafeInteger(p))throw new TypeError(`dims[${l}] must be an integer, got: ${p}`);if(p<0)throw new RangeError(`dims[${l}] must be a non-negative integer, got: ${p}`);a*=p}return a},hf=(f,a)=>{switch(f.location){case"cpu":return new we(f.type,f.data,a);case"cpu-pinned":return new we({location:"cpu-pinned",data:f.data,type:f.type,dims:a});case"texture":return new we({location:"texture",texture:f.texture,type:f.type,dims:a});case"gpu-buffer":return new we({location:"gpu-buffer",gpuBuffer:f.gpuBuffer,type:f.type,dims:a});case"ml-tensor":return new we({location:"ml-tensor",mlTensor:f.mlTensor,type:f.type,dims:a});default:throw new Error(`tensorReshape: tensor location ${f.location} is not supported`)}}});var we,Qt=q(()=>{"use strict";rf();ff();df();mf();we=class{constructor(a,l,p){lf();let d,v;if(typeof a=="object"&&"location"in a)switch(this.dataLocation=a.location,d=a.type,v=a.dims,a.location){case"cpu-pinned":{let S=st.get(d);if(!S)throw new TypeError(`unsupported type "${d}" to create tensor from pinned buffer`);if(!(a.data instanceof S))throw new TypeError(`buffer should be of type ${S.name}`);this.cpuData=a.data;break}case"texture":{if(d!=="float32")throw new TypeError(`unsupported type "${d}" to create tensor from texture`);this.gpuTextureData=a.texture,this.downloader=a.download,this.disposer=a.dispose;break}case"gpu-buffer":{if(d!=="float32"&&d!=="float16"&&d!=="int32"&&d!=="int64"&&d!=="uint32"&&d!=="uint8"&&d!=="bool"&&d!=="uint4"&&d!=="int4")throw new TypeError(`unsupported type "${d}" to create tensor from gpu buffer`);this.gpuBufferData=a.gpuBuffer,this.downloader=a.download,this.disposer=a.dispose;break}case"ml-tensor":{if(d!=="float32"&&d!=="float16"&&d!=="int32"&&d!=="int64"&&d!=="uint32"&&d!=="uint64"&&d!=="int8"&&d!=="uint8"&&d!=="bool"&&d!=="uint4"&&d!=="int4")throw new TypeError(`unsupported type "${d}" to create tensor from MLTensor`);this.mlTensorData=a.mlTensor,this.downloader=a.download,this.disposer=a.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let S,I;if(typeof a=="string")if(d=a,I=p,a==="string"){if(!Array.isArray(l))throw new TypeError("A string tensor's data must be a string array.");S=l}else{let L=st.get(a);if(L===void 0)throw new TypeError(`Unsupported tensor type: ${a}.`);if(Array.isArray(l)){if(a==="float16"&&L===Uint16Array||a==="uint4"||a==="int4")throw new TypeError(`Creating a ${a} tensor from number array is not supported. Please use ${L.name} as data.`);a==="uint64"||a==="int64"?S=L.from(l,BigInt):S=L.from(l)}else if(l instanceof L)S=l;else if(l instanceof Uint8ClampedArray)if(a==="uint8")S=Uint8Array.from(l);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(a==="float16"&&l instanceof Uint16Array&&L!==Uint16Array)S=new globalThis.Float16Array(l.buffer,l.byteOffset,l.length);else throw new TypeError(`A ${d} tensor's data must be type of ${L}`)}else if(I=l,Array.isArray(a)){if(a.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let L=typeof a[0];if(L==="string")d="string",S=a;else if(L==="boolean")d="bool",S=Uint8Array.from(a);else throw new TypeError(`Invalid element type of data array: ${L}.`)}else if(a instanceof Uint8ClampedArray)d="uint8",S=Uint8Array.from(a);else{let L=Ut.get(a.constructor);if(L===void 0)throw new TypeError(`Unsupported type for tensor data: ${a.constructor}.`);d=L,S=a}if(I===void 0)I=[S.length];else if(!Array.isArray(I))throw new TypeError("A tensor's dims must be a number array");v=I,this.cpuData=S,this.dataLocation="cpu"}let E=pf(v);if(this.cpuData&&E!==this.cpuData.length&&!((d==="uint4"||d==="int4")&&Math.ceil(E/2)===this.cpuData.length))throw new Error(`Tensor's size(${E}) does not match data length(${this.cpuData.length}).`);this.type=d,this.dims=v,this.size=E}static async fromImage(a,l){return nf(a,l)}static fromTexture(a,l){return of(a,l)}static fromGpuBuffer(a,l){return af(a,l)}static fromMLTensor(a,l){return sf(a,l)}static fromPinnedBuffer(a,l,p){return uf(a,l,p)}toDataURL(a){return ef(this,a)}toImageData(a){return tf(this,a)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(a){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let l=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=l,a&&this.disposer&&(this.disposer(),this.disposer=void 0),l}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(a){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return hf(this,a)}}});var De,on=q(()=>{"use strict";Qt();De=we});var yf,wf,ut,ft,Je,Xe,an=q(()=>{"use strict";rn();yf=(f,a)=>{(typeof me.trace>"u"?!me.wasm.trace:!me.trace)||console.timeStamp(`${f}::ORT::${a}`)},wf=(f,a)=>{let l=new Error().stack?.split(/\r\n|\r|\n/g)||[],p=!1;for(let d=0;d<l.length;d++){if(p&&!l[d].includes("TRACE_FUNC")){let v=`FUNC_${f}::${l[d].trim().split(" ")[1]}`;a&&(v+=`::${a}`),yf("CPU",v);return}l[d].includes("TRACE_FUNC")&&(p=!0)}},ut=f=>{(typeof me.trace>"u"?!me.wasm.trace:!me.trace)||wf("BEGIN",f)},ft=f=>{(typeof me.trace>"u"?!me.wasm.trace:!me.trace)||wf("END",f)},Je=f=>{(typeof me.trace>"u"?!me.wasm.trace:!me.trace)||console.time(`ORT::${f}`)},Xe=f=>{(typeof me.trace>"u"?!me.wasm.trace:!me.trace)||console.timeEnd(`ORT::${f}`)}});var Kt,gf=q(()=>{"use strict";tn();on();an();Kt=class f{constructor(a){this.handler=a}async run(a,l,p){ut(),Je("InferenceSession.run");let d={},v={};if(typeof a!="object"||a===null||a instanceof De||Array.isArray(a))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let E=!0;if(typeof l=="object"){if(l===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(l instanceof De)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(l)){if(l.length===0)throw new TypeError("'fetches' cannot be an empty array.");E=!1;for(let L of l){if(typeof L!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(L)===-1)throw new RangeError(`'fetches' contains invalid output name: ${L}.`);d[L]=null}if(typeof p=="object"&&p!==null)v=p;else if(typeof p<"u")throw new TypeError("'options' must be an object.")}else{let L=!1,B=Object.getOwnPropertyNames(l);for(let C of this.outputNames)if(B.indexOf(C)!==-1){let M=l[C];(M===null||M instanceof De)&&(L=!0,E=!1,d[C]=M)}if(L){if(typeof p=="object"&&p!==null)v=p;else if(typeof p<"u")throw new TypeError("'options' must be an object.")}else v=l}}else if(typeof l<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let L of this.inputNames)if(typeof a[L]>"u")throw new Error(`input '${L}' is missing in 'feeds'.`);if(E)for(let L of this.outputNames)d[L]=null;let S=await this.handler.run(a,d,v),I={};for(let L in S)if(Object.hasOwnProperty.call(S,L)){let B=S[L];B instanceof De?I[L]=B:I[L]=new De(B.type,B.data,B.dims)}return Xe("InferenceSession.run"),ft(),I}async release(){return this.handler.dispose()}static async create(a,l,p,d){ut(),Je("InferenceSession.create");let v,E={};if(typeof a=="string"){if(v=a,typeof l=="object"&&l!==null)E=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else if(a instanceof Uint8Array){if(v=a,typeof l=="object"&&l!==null)E=l;else if(typeof l<"u")throw new TypeError("'options' must be an object.")}else if(a instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&a instanceof SharedArrayBuffer){let B=a,C=0,M=a.byteLength;if(typeof l=="object"&&l!==null)E=l;else if(typeof l=="number"){if(C=l,!Number.isSafeInteger(C))throw new RangeError("'byteOffset' must be an integer.");if(C<0||C>=B.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${B.byteLength}).`);if(M=a.byteLength-C,typeof p=="number"){if(M=p,!Number.isSafeInteger(M))throw new RangeError("'byteLength' must be an integer.");if(M<=0||C+M>B.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${B.byteLength-C}].`);if(typeof d=="object"&&d!==null)E=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else if(typeof p<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof l<"u")throw new TypeError("'options' must be an object.");v=new Uint8Array(B,C,M)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[S,I]=await Yu(E),L=await S.createInferenceSessionHandler(v,I);return Xe("InferenceSession.create"),ft(),new f(L)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}});var Ry,bf=q(()=>{"use strict";gf();Ry=Kt});var vf=q(()=>{"use strict"});var Tf=q(()=>{"use strict"});var Ef=q(()=>{"use strict"});var Sf=q(()=>{"use strict"});var sn={};Ct(sn,{InferenceSession:()=>Ry,TRACE:()=>yf,TRACE_EVENT_BEGIN:()=>Je,TRACE_EVENT_END:()=>Xe,TRACE_FUNC_BEGIN:()=>ut,TRACE_FUNC_END:()=>ft,Tensor:()=>De,env:()=>se,registerBackend:()=>it});var Ze=q(()=>{"use strict";Ju();Ku();bf();on();vf();Tf();an();Ef();Sf()});var er=q(()=>{"use strict"});var Lf={};Ct(Lf,{default:()=>Ny});var xf,If,Ny,Of=q(()=>{"use strict";un();Qe();tr();xf="ort-wasm-proxy-worker",If=globalThis.self?.name===xf;If&&(self.onmessage=f=>{let{type:a,in:l}=f.data;try{switch(a){case"init-wasm":rr(l.wasm).then(()=>{nr(l).then(()=>{postMessage({type:a})},p=>{postMessage({type:a,err:p})})},p=>{postMessage({type:a,err:p})});break;case"init-ep":{let{epName:p,env:d}=l;or(d,p).then(()=>{postMessage({type:a})},v=>{postMessage({type:a,err:v})});break}case"copy-from":{let{buffer:p}=l,d=Dt(p);postMessage({type:a,out:d});break}case"create":{let{model:p,options:d}=l;ar(p,d).then(v=>{postMessage({type:a,out:v})},v=>{postMessage({type:a,err:v})});break}case"release":ir(l),postMessage({type:a});break;case"run":{let{sessionId:p,inputIndices:d,inputs:v,outputIndices:E,options:S}=l;sr(p,d,v,E,new Array(E.length).fill(null),S).then(I=>{I.some(L=>L[3]!=="cpu")?postMessage({type:a,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:a,out:I},fr([...v,...I]))},I=>{postMessage({type:a,err:I})});break}case"end-profiling":ur(l),postMessage({type:a});break;default:}}catch(p){postMessage({type:a,err:p})}});Ny=If?null:f=>new Worker(f??xe,{type:"module",name:xf})});var Mf={};Ct(Mf,{default:()=>Wy});async function Bf(f={}){var a=f,l=typeof window=="object",p=typeof WorkerGlobalScope<"u",d=p&&self.name?.startsWith("em-pthread");a.mountExternalData=(e,t)=>{e.startsWith("./")&&(e=e.substring(2)),(a.pg||(a.pg=new Map)).set(e,t)},a.unmountExternalData=()=>{delete a.pg};var v=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,sl:!0}).buffer.constructor;let E=()=>{let e=t=>(...n)=>{let o=_e;return n=t(...n),_e!=o?new Promise((r,i)=>{Pr={resolve:r,reject:i}}):n};(()=>{for(let t of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])a[t]=e(a[t])})(),typeof jsepRunAsync<"u"&&(a._OrtRun=jsepRunAsync(a._OrtRun),a._OrtRunWithBinding=jsepRunAsync(a._OrtRunWithBinding)),E=void 0};a.asyncInit=()=>{E?.()};var S,I,L=(e,t)=>{throw t},B=import.meta.url,C="";if(l||p){try{C=new URL(".",B).href}catch{}p&&(I=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),S=async e=>{if(le(e))return new Promise((n,o)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?n(r.response):o(r.status)},r.onerror=o,r.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)}}var M,_,F,V,K,G,W,re=console.log.bind(console),z=console.error.bind(console),Q=re,Z=z,ce=!1,le=e=>e.startsWith("file://");function b(){Be.buffer!=ee.buffer&&Ve()}if(d){let e=function(t){try{var n=t.data,o=n.lg;if(o==="load"){let r=[];self.onmessage=i=>r.push(i),W=()=>{postMessage({lg:"loaded"});for(let i of r)e(i);self.onmessage=e};for(let i of n.$k)a[i]&&!a[i].proxy||(a[i]=(...s)=>{postMessage({lg:"callHandler",Xk:i,args:s})},i=="print"&&(Q=a[i]),i=="printErr"&&(Z=a[i]));Be=n.ll,Ve(),G(n.ml)}else if(o==="run"){(function(r){var i=(b(),P)[r+52>>>2>>>0];r=(b(),P)[r+56>>>2>>>0],jo(i,i-r),y(i)})(n.jg),Yr(n.jg,0,0,1,0,0),Ln(),Ur(n.jg),Ae||(Ao(),Ae=!0);try{wc(n.il,n.rg)}catch(r){if(r!="unwind")throw r}}else n.target!=="setimmediate"&&(o==="checkMailbox"?Ae&&Ft():o&&(Z(`worker: received unknown command ${o}`),Z(n)))}catch(r){throw No(),r}};var c0=e,Ae=!1;self.onunhandledrejection=t=>{throw t.reason||t},self.onmessage=e}var Be,ee,ne,Re,$,k,P,te,pe,J,he,Sr=!1;function Ve(){var e=Be.buffer;a.HEAP8=ee=new Int8Array(e),Re=new Int16Array(e),a.HEAPU8=ne=new Uint8Array(e),$=new Uint16Array(e),a.HEAP32=k=new Int32Array(e),a.HEAPU32=P=new Uint32Array(e),te=new Float32Array(e),pe=new Float64Array(e),J=new BigInt64Array(e),he=new BigUint64Array(e)}function et(){Sr=!0,d?W():Ye.uf()}var mt,tt=0,Ee=null;function Me(){if(--tt==0&&Ee){var e=Ee;Ee=null,e()}}function be(e){throw Z(e="Aborted("+e+")"),ce=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),K?.(e),e}function de(){return{a:{Dc:Dd,t:gc,Z:bc,b:vc,n:Tc,A:Ec,D:Sc,s:Ac,Vb:xc,w:Ic,wb:Lc,zd:Dn,g:Oc,Sb:Rn,Pd:Nn,qf:Wn,sf:Fn,Qd:Gn,Nd:$n,Gd:jn,Md:zn,Bc:Vn,rf:Hn,of:qn,Od:Yn,pf:Jn,Vd:Bc,xd:Cc,jf:Uc,gf:Pc,wd:kc,La:Rc,oa:Nc,hf:Wc,vc:Hc,kf:qc,Jd:Yc,mf:Jc,Ad:Xc,df:Zc,yd:Qc,Id:Ur,Sd:Kc,oe:nl,$:ul,se:Br,ie:fl,Wb:cl,cb:ll,me:dl,X:pl,_:no,je:no,Xb:hl,ke:ml,ia:yl,db:wl,pe:gl,le:bl,Dd:vl,Ed:Tl,Fd:El,Bd:so,Cd:uo,ef:fo,Xd:Al,Ud:Ll,xb:Ol,he:Bl,xc:Ml,Td:xl,yb:Cl,Rd:Ul,nf:Dl,ga:Sl,_d:Pl,zb:_l,Cc:Vt,lf:kl,Zd:Rl,Yd:Nl,ee:zl,Gc:Vl,Fc:Hl,Ec:ql,ge:Yl,Ub:Jl,sa:Xl,de:Zl,ce:Ql,fe:Kl,be:ed,ae:td,$d:rd,Kd:wo,Ld:go,tf:xr,Tb:bo,Ac:vo,Hd:To,zc:Eo,Ob:mp,Eb:jm,Yb:Ly,C:yy,Aa:ch,Da:hp,Tc:_m,bc:$m,ic:Uh,Y:Am,y:Jd,c:Rd,Ea:rp,md:gh,h:_d,va:Mh,ra:vy,d:Pd,ka:Qh,j:Hd,qe:By,q:lp,Mb:_p,m:Wd,v:Up,r:pp,mb:ym,Q:sp,ma:_h,qa:Nh,sd:xp,dc:Sm,fb:xm,_b:uy,jb:qm,ed:Kh,td:Tp,ad:nm,gb:Yh,cd:tm,pb:Xh,ba:Om,Pb:ip,gc:Zh,ea:Bh,ja:qh,P:mm,dd:em,$e:cp,Qa:mh,I:Xd,Mc:wy,rb:Ph,Le:rm,ya:km,Ja:Rh,B:np,fc:um,$c:om,hd:zh,id:jh,hc:$h,Ke:im,Ic:xy,Pa:Sh,ca:Um,Xa:Ty,ta:gy,ib:Iy,Jc:Ay,gd:Vh,Hc:Oy,nc:dh,W:Gd,N:Cp,F:Kd,Ab:My,re:Sy,Ha:kh,S:ih,_c:sm,fd:Hh,U:kp,e:Nd,Za:bm,l:Fd,qd:Bp,$a:xh,pa:$p,Hb:fm,i:kd,rd:Op,T:Gp,wa:lh,Db:Ym,nb:lm,f:jd,te:hy,we:ly,k:Vd,Xc:vm,o:Yd,ue:py,Zc:dm,xe:cy,Wc:Tm,nd:hh,Be:Xm,p:qd,We:qp,Ta:Qp,Lb:Zp,Sa:Kp,ac:Vm,E:ap,H:Ep,Sc:Gm,L:fp,Ya:my,ve:dy,sc:zp,tc:jp,Gb:gm,aa:Ip,da:Np,za:bh,ab:Wp,Oa:Rm,Ie:pm,Ia:Lp,Ga:ny,Nc:iy,Oc:ay,eb:oy,Bb:ry,Ma:Jm,He:Em,xa:Wm,ye:sy,Ge:Cm,Ve:Jp,mc:ph,Na:Nm,V:dp,lb:Fm,Uc:Bm,Fb:Lm,ua:Dm,hb:Yp,jd:Gh,Nb:bp,ob:am,J:Dp,tb:Th,na:wp,jc:Ch,Se:vh,ha:wh,vb:Ap,Zb:fy,Pc:ty,kc:Lh,kd:Ih,ld:Eh,pd:Fp,_a:Jh,Lc:by,ec:cm,Cb:Km,z:Qd,G:Mp,Fa:Zd,Ka:gp,Re:Ah,rc:Vp,Qb:ep,M:op,kb:Hm,Ca:Mm,Rc:zm,Ye:Sp,ze:ey,x:tp,K:vp,fa:$d,Ee:Pm,pc:oh,Qc:Qm,Va:Rp,bb:yp,oc:ah,ub:Pp,lc:yh,bf:zd,Ne:Fh,$b:Zm,cc:Im,sb:Oh,ud:up,qc:Hp,Kc:Ey,la:sh,Yc:hm,O:wm,qb:Wh,Pe:Dh,Ba:fh,R:uh,Jb:rh,Ra:th,Ua:Xp,Ib:nh,Kb:eh,u:od,a:Be,Wd:Ar,Xe:ad,Ze:id,Wa:sd,yc:ud,_e:fd,ff:cd,Qe:ld,Te:dd,Vc:pd,Je:hd,Rb:md,vd:yd,bd:wd,uc:gd,Me:bd,cf:vd,wc:Td,ne:Ed,Ue:Sd,Ae:Ad,Ce:Id,Fe:Ld,De:Od,od:Bd,Oe:Md,af:Cd}}}class oe{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var Ce=e=>{e.terminate(),e.onmessage=()=>{}},Ne=[],yt=e=>{He.length==0&&(Bn(),On(He[0]));var t=He.pop();if(!t)return 6;xt.push(t),rt[e.jg]=t,t.jg=e.jg;var n={lg:"run",il:e.hl,rg:e.rg,jg:e.jg};return t.postMessage(n,e.Zj),0},ue=0,ae=(e,t,...n)=>{for(var o=2*n.length,r=w(),i=Jt(8*o),s=i>>>3,u=0;u<n.length;u++){var c=n[u];typeof c=="bigint"?((b(),J)[s+2*u>>>0]=1n,(b(),J)[s+2*u+1>>>0]=c):((b(),J)[s+2*u>>>0]=0n,(b(),pe)[s+2*u+1>>>0]=c)}return e=Wo(e,0,o,i,t),y(r),e};function Ar(e){if(d)return ae(0,1,e);if(F=e,!(0<ue)){for(var t of xt)Ce(t);for(t of He)Ce(t);He=[],xt=[],rt={},ce=!0}L(0,new oe(e))}function An(e){if(d)return ae(1,0,e);xr(e)}var xr=e=>{if(F=e,d)throw An(e),"unwind";Ar(e)},He=[],xt=[],xn=[],rt={},In=e=>{var t=e.jg;delete rt[t],He.push(e),xt.splice(xt.indexOf(e),1),e.jg=0,Fo(t)};function Ln(){xn.forEach(e=>e())}var On=e=>new Promise(t=>{e.onmessage=r=>{var i=(r=r.data).lg;if(r.qg&&r.qg!=jr()){var s=rt[r.qg];s?s.postMessage(r,r.Zj):Z(`Internal error! Worker sent a message "${i}" to target pthread ${r.qg}, but that thread no longer exists!`)}else i==="checkMailbox"?Ft():i==="spawnThread"?yt(r):i==="cleanupThread"?In(rt[r.jl]):i==="loaded"?(e.loaded=!0,t(e)):r.target==="setimmediate"?e.postMessage(r):i==="callHandler"?a[r.Xk](...r.args):i&&Z(`worker sent an unknown command ${i}`)},e.onerror=r=>{throw Z(`worker sent an error! ${r.filename}:${r.lineno}: ${r.message}`),r};var n,o=[];for(n of[])a.propertyIsEnumerable(n)&&o.push(n);e.postMessage({lg:"load",$k:o,ll:Be,ml:_})});function Bn(){var e=new Worker((()=>{let t=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new t("ort.webgpu.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});He.push(e)}var wc=(e,t)=>{ue=0,e=Zr(e,t),0<ue?F=e:Jr(e)},Nt=[],Wt=0,Se=e=>-9007199254740992>e||9007199254740992<e?NaN:Number(e);function gc(e){var t=new Ir(e>>>=0);return(b(),ee)[t.kg+12>>>0]==0&&(Mn(t,!0),Wt--),Cn(t,!1),Nt.push(t),Vo(e),qo(e)}var wt=0,bc=()=>{g(0,0);var e=Nt.pop();zo(e.Dg),wt=0};function Mn(e,t){t=t?1:0,(b(),ee)[e.kg+12>>>0]=t}function Cn(e,t){t=t?1:0,(b(),ee)[e.kg+13>>>0]=t}class Ir{constructor(t){this.Dg=t,this.kg=t-24}}var It=e=>{var t=wt;if(!t)return Mt(0),0;var n=new Ir(t);(b(),P)[n.kg+16>>>2>>>0]=t;var o=(b(),P)[n.kg+4>>>2>>>0];if(!o)return Mt(0),t;for(var r of e){if(r===0||r===o)break;if(Ho(r,o,n.kg+16))return Mt(r),t}return Mt(o),t};function vc(){return It([])}function Tc(e){return It([e>>>0])}function Ec(e,t){return It([e>>>0,t>>>0])}function Sc(e,t,n){return It([e>>>0,t>>>0,n>>>0])}function Ac(e,t,n,o){return It([e>>>0,t>>>0,n>>>0,o>>>0])}var xc=()=>{var e=Nt.pop();e||be("no exception to throw");var t=e.Dg;throw(b(),ee)[e.kg+13>>>0]==0&&(Nt.push(e),Cn(e,!0),Mn(e,!1),Wt++),wt=t};function Ic(e,t,n){var o=new Ir(e>>>=0);throw t>>>=0,n>>>=0,(b(),P)[o.kg+16>>>2>>>0]=0,(b(),P)[o.kg+4>>>2>>>0]=t,(b(),P)[o.kg+8>>>2>>>0]=n,Wt++,wt=e}var Lc=()=>Wt;function Un(e,t,n,o){return d?ae(2,1,e,t,n,o):Dn(e,t,n,o)}function Dn(e,t,n,o){if(e>>>=0,n>>>=0,o>>>=0,v===void 0)return 6;var r=[];return d&&r.length===0?Un(e,t>>>=0,n,o):(e={hl:n,jg:e,rg:o,Zj:r},d?(e.lg="spawnThread",postMessage(e,r),0):yt(e))}function Oc(e){throw wt||=e>>>0,wt}var Pn=typeof TextDecoder<"u"?new TextDecoder:void 0,_n=(e,t,n,o)=>{if(n=t+n,o)return n;for(;e[t]&&!(t>=n);)++t;return t},kn=(e,t=0,n,o)=>{if(16<(n=_n(e,t>>>=0,n,o))-t&&e.buffer&&Pn)return Pn.decode(e.buffer instanceof ArrayBuffer?e.subarray(t,n):e.slice(t,n));for(o="";t<n;){var r=e[t++];if(128&r){var i=63&e[t++];if((224&r)==192)o+=String.fromCharCode((31&r)<<6|i);else{var s=63&e[t++];65536>(r=(240&r)==224?(15&r)<<12|i<<6|s:(7&r)<<18|i<<12|s<<6|63&e[t++])?o+=String.fromCharCode(r):(r-=65536,o+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else o+=String.fromCharCode(r)}return o},gt=(e,t,n)=>(e>>>=0)?kn((b(),ne),e,t,n):"";function Rn(e,t,n){return d?ae(3,1,e,t,n):0}function Nn(e,t){if(d)return ae(4,1,e,t)}function Wn(e,t){if(d)return ae(5,1,e,t)}function Fn(e,t,n){if(d)return ae(6,1,e,t,n)}function Gn(e,t,n){return d?ae(7,1,e,t,n):0}function $n(e,t){if(d)return ae(8,1,e,t)}function jn(e,t,n){if(d)return ae(9,1,e,t,n)}function zn(e,t,n,o){if(d)return ae(10,1,e,t,n,o)}function Vn(e,t,n,o){if(d)return ae(11,1,e,t,n,o)}function Hn(e,t,n,o){if(d)return ae(12,1,e,t,n,o)}function qn(e){if(d)return ae(13,1,e)}function Yn(e,t){if(d)return ae(14,1,e,t)}function Jn(e,t,n){if(d)return ae(15,1,e,t,n)}var Bc=()=>be(""),Pe=e=>{e>>>=0;for(var t="";;){var n=(b(),ne)[e++>>>0];if(!n)return t;t+=String.fromCharCode(n)}},Lr={},Or={},Mc={},bt=class extends Error{constructor(e){super(e),this.name="BindingError"}};function We(e,t,n={}){return function(o,r,i={}){var s=r.name;if(!o)throw new bt(`type "${s}" must have a positive integer typeid pointer`);if(Or.hasOwnProperty(o)){if(i.al)return;throw new bt(`Cannot register type '${s}' twice`)}Or[o]=r,delete Mc[o],Lr.hasOwnProperty(o)&&(r=Lr[o],delete Lr[o],r.forEach(u=>u()))}(e,t,n)}var Xn=(e,t,n)=>{switch(t){case 1:return n?o=>(b(),ee)[o>>>0]:o=>(b(),ne)[o>>>0];case 2:return n?o=>(b(),Re)[o>>>1>>>0]:o=>(b(),$)[o>>>1>>>0];case 4:return n?o=>(b(),k)[o>>>2>>>0]:o=>(b(),P)[o>>>2>>>0];case 8:return n?o=>(b(),J)[o>>>3>>>0]:o=>(b(),he)[o>>>3>>>0];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function Cc(e,t,n,o,r){e>>>=0,n>>>=0,t=Pe(t>>>0);let i=s=>s;if(o=o===0n){let s=8*n;i=u=>BigInt.asUintN(s,u),r=i(r)}We(e,{name:t,hg:i,ng:(s,u)=>(typeof u=="number"&&(u=BigInt(u)),u),mg:Xn(t,n,!o),og:null})}function Uc(e,t,n,o){We(e>>>=0,{name:t=Pe(t>>>0),hg:function(r){return!!r},ng:function(r,i){return i?n:o},mg:function(r){return this.hg((b(),ne)[r>>>0])},og:null})}var Zn=[],nt=[0,1,,1,null,1,!0,1,!1,1];function Br(e){9<(e>>>=0)&&--nt[e+1]==0&&(nt[e]=void 0,Zn.push(e))}var Ie=e=>{if(!e)throw new bt(`Cannot use deleted val. handle = ${e}`);return nt[e]},Ue=e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let t=Zn.pop()||nt.length;return nt[t]=e,nt[t+1]=1,t}};function Mr(e){return this.hg((b(),P)[e>>>2>>>0])}var Dc={name:"emscripten::val",hg:e=>{var t=Ie(e);return Br(e),t},ng:(e,t)=>Ue(t),mg:Mr,og:null};function Pc(e){return We(e>>>0,Dc)}var _c=(e,t)=>{switch(t){case 4:return function(n){return this.hg((b(),te)[n>>>2>>>0])};case 8:return function(n){return this.hg((b(),pe)[n>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}};function kc(e,t,n){n>>>=0,We(e>>>=0,{name:t=Pe(t>>>0),hg:o=>o,ng:(o,r)=>r,mg:_c(t,n),og:null})}function Rc(e,t,n,o,r){e>>>=0,n>>>=0,t=Pe(t>>>0);let i=u=>u;if(o===0){var s=32-8*n;i=u=>u<<s>>>s,r=i(r)}We(e,{name:t,hg:i,ng:(u,c)=>c,mg:Xn(t,n,o!==0),og:null})}function Nc(e,t,n){function o(i){var s=(b(),P)[i>>>2>>>0];return i=(b(),P)[i+4>>>2>>>0],new r((b(),ee).buffer,i,s)}var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];We(e>>>=0,{name:n=Pe(n>>>0),hg:o,mg:o},{al:!0})}var Fe=(e,t,n)=>{var o=(b(),ne);if(t>>>=0,0<n){var r=t;n=t+n-1;for(var i=0;i<e.length;++i){var s=e.codePointAt(i);if(127>=s){if(t>=n)break;o[t++>>>0]=s}else if(2047>=s){if(t+1>=n)break;o[t++>>>0]=192|s>>6,o[t++>>>0]=128|63&s}else if(65535>=s){if(t+2>=n)break;o[t++>>>0]=224|s>>12,o[t++>>>0]=128|s>>6&63,o[t++>>>0]=128|63&s}else{if(t+3>=n)break;o[t++>>>0]=240|s>>18,o[t++>>>0]=128|s>>12&63,o[t++>>>0]=128|s>>6&63,o[t++>>>0]=128|63&s,i++}}o[t>>>0]=0,e=t-r}else e=0;return e},Ge=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t};function Wc(e,t){We(e>>>=0,{name:t=Pe(t>>>0),hg(n){var o=(b(),P)[n>>>2>>>0];return o=gt(n+4,o,!0),Le(n),o},ng(n,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var r=typeof o=="string";if(!(r||ArrayBuffer.isView(o)&&o.BYTES_PER_ELEMENT==1))throw new bt("Cannot pass non-string to std::string");var i=r?Ge(o):o.length,s=Tt(4+i+1),u=s+4;return(b(),P)[s>>>2>>>0]=i,r?Fe(o,u,i+1):(b(),ne).set(o,u>>>0),n!==null&&n.push(Le,s),s},mg:Mr,og(n){Le(n)}})}var Qn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Fc=(e,t,n)=>{if(e>>>=1,16<(t=_n((b(),$),e,t/2,n))-e&&Qn)return Qn.decode((b(),$).buffer instanceof ArrayBuffer?(b(),$).subarray(e>>>0,t>>>0):(b(),$).slice(e,t));for(n="";e<t;++e){var o=(b(),$)[e>>>0];n+=String.fromCharCode(o)}return n},Gc=(e,t,n)=>{if(n??=2147483647,2>n)return 0;var o=t;n=(n-=2)<2*e.length?n/2:e.length;for(var r=0;r<n;++r){var i=e.charCodeAt(r);(b(),Re)[t>>>1>>>0]=i,t+=2}return(b(),Re)[t>>>1>>>0]=0,t-o},$c=e=>2*e.length,jc=(e,t,n)=>{var o="";e>>>=2;for(var r=0;!(r>=t/4);r++){var i=(b(),P)[e+r>>>0];if(!i&&!n)break;o+=String.fromCodePoint(i)}return o},zc=(e,t,n)=>{if(t>>>=0,n??=2147483647,4>n)return 0;var o=t;n=o+n-4;for(var r=0;r<e.length;++r){var i=e.codePointAt(r);if(65535<i&&r++,(b(),k)[t>>>2>>>0]=i,(t+=4)+4>n)break}return(b(),k)[t>>>2>>>0]=0,t-o},Vc=e=>{for(var t=0,n=0;n<e.length;++n)65535<e.codePointAt(n)&&n++,t+=4;return t};function Hc(e,t,n){if(e>>>=0,t>>>=0,n=Pe(n>>>=0),t===2)var o=Fc,r=Gc,i=$c;else o=jc,r=zc,i=Vc;We(e,{name:n,hg:s=>{var u=(b(),P)[s>>>2>>>0];return u=o(s+4,u*t,!0),Le(s),u},ng:(s,u)=>{if(typeof u!="string")throw new bt(`Cannot pass non-string to C++ string type ${n}`);var c=i(u),h=Tt(4+c+t);return(b(),P)[h>>>2>>>0]=c/t,r(u,h+4,c+t),s!==null&&s.push(Le,h),h},mg:Mr,og(s){Le(s)}})}function qc(e,t){We(e>>>=0,{fl:!0,name:t=Pe(t>>>0),hg:()=>{},ng:()=>{}})}function Yc(e){Yr(e>>>0,!p,1,!l,131072,!1),Ln()}var Cr=e=>{if(!ce)try{if(e(),!(0<ue))try{d?Jr(F):xr(F)}catch(t){t instanceof oe||t=="unwind"||L(0,t)}}catch(t){t instanceof oe||t=="unwind"||L(0,t)}};function Ur(e){e>>>=0,typeof Atomics.kl=="function"&&(Atomics.kl((b(),k),e>>>2,e).value.then(Ft),e+=128,Atomics.store((b(),k),e>>>2,1))}var Ft=()=>{var e=jr();e&&(Ur(e),Cr($o))};function Jc(e,t){(e>>>=0)==t>>>0?setTimeout(Ft):d?postMessage({qg:e,lg:"checkMailbox"}):(e=rt[e])&&e.postMessage({lg:"checkMailbox"})}var Gt=[];function Xc(e,t,n,o,r){for(t>>>=0,o/=2,Gt.length=o,n=r>>>0>>>3,r=0;r<o;r++)(b(),J)[n+2*r>>>0]?Gt[r]=(b(),J)[n+2*r+1>>>0]:Gt[r]=(b(),pe)[n+2*r+1>>>0];return(t?Gr[t]:Ud[e])(...Gt)}var Zc=()=>{ue=0};function Qc(e){e>>>=0,d?postMessage({lg:"cleanupThread",jl:e}):In(rt[e])}function Kc(e){}var $t=e=>{try{e()}catch(t){be(t)}};function el(e){var t=(...n)=>{jt.push(e);try{return e(...n)}finally{ce||(jt.pop(),_e&&qe===1&&jt.length===0&&(qe=0,ue+=1,$t(Vu),typeof Fibers<"u"&&Fibers.ul()))}};return to.set(e,t),t}var qe=0,_e=null,Kn=0,jt=[],Dr=new Map,eo=new Map,to=new Map,tl=0,Pr=null,rl=[],ro=e=>function(t){if(!ce){if(qe===0){var n=!1,o=!1;t((r=0)=>{if(!ce&&(Kn=r,n=!0,o)){qe=2,$t(()=>Hu(_e)),typeof MainLoop<"u"&&MainLoop.Wk&&MainLoop.resume(),r=!1;try{var i=function(){var c=(b(),k)[_e+8>>>2>>>0];return c=eo.get(c),c=to.get(c),--ue,c()}()}catch(c){i=c,r=!0}var s=!1;if(!_e){var u=Pr;u&&(Pr=null,(r?u.reject:u.resolve)(i),s=!0)}if(r&&!s)throw i}}),o=!0,n||(qe=1,_e=function(){var r=Tt(65548),i=r+12;if((b(),P)[r>>>2>>>0]=i,(b(),P)[r+4>>>2>>>0]=i+65536,i=jt[0],!Dr.has(i)){var s=tl++;Dr.set(i,s),eo.set(s,i)}return i=Dr.get(i),(b(),k)[r+8>>>2>>>0]=i,r}(),typeof MainLoop<"u"&&MainLoop.Wk&&MainLoop.pause(),$t(()=>zu(_e)))}else qe===2?(qe=0,$t(qu),Le(_e),_e=null,rl.forEach(Cr)):be(`invalid state: ${qe}`);return Kn}}(t=>{e().then(t)});function nl(e){return e>>>=0,ro(async()=>{var t=await Ie(e);return Ue(t)})}var _r=[],ol=e=>{var t=_r.length;return _r.push(e),t},al=(e,t)=>{for(var n=Array(e),o=0;o<e;++o){var r=o,i=(b(),P)[t+4*o>>>2>>>0],s=Or[i];if(s===void 0)throw e=`parameter ${o}`,i=So(i),t=Pe(i),Le(i),new bt(`${e} has unknown type ${t}`);n[r]=s}return n},il=(e,t,n)=>{var o=[];return e=e(o,n),o.length&&((b(),P)[t>>>2>>>0]=Ue(o)),e},sl={},zt=e=>{var t=sl[e];return t===void 0?Pe(e):t};function ul(e,t,n){var[o,...r]=al(e,t>>>0);t=o.ng.bind(o);var i=r.map(c=>c.mg.bind(c));e--;var s={toValue:Ie};switch(e=i.map((c,h)=>{var m=`argFromPtr${h}`;return s[m]=c,`${m}(args${h?"+"+8*h:""})`}),n){case 0:var u="toValue(handle)";break;case 2:u="new (toValue(handle))";break;case 3:u="";break;case 1:s.getStringOrSymbol=zt,u="toValue(handle)[getStringOrSymbol(methodName)]"}return u+=`(${e})`,o.fl||(s.toReturnWire=t,s.emval_returnValue=il,u=`return emval_returnValue(toReturnWire, destructorsRef, ${u})`),u=`return function (handle, methodName, destructorsRef, args) {
  ${u}
  }`,n=new Function(Object.keys(s),u)(...Object.values(s)),u=`methodCaller<(${r.map(c=>c.name)}) => ${o.name}>`,ol(Object.defineProperty(n,"name",{value:u}))}function fl(e,t){return t>>>=0,(e=Ie(e>>>0))==Ie(t)}function cl(e){return(e>>>=0)==0?Ue(globalThis):(e=zt(e),Ue(globalThis[e]))}function ll(e){return e=zt(e>>>0),Ue(a[e])}function dl(e,t){return t>>>=0,e=Ie(e>>>0),t=Ie(t),Ue(e[t])}function pl(e){9<(e>>>=0)&&(nt[e+1]+=1)}function no(e,t,n,o,r){return _r[e>>>0](t>>>0,n>>>0,o>>>0,r>>>0)}function hl(){return Ue([])}function ml(e){e=Ie(e>>>0);for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return Ue(t)}function yl(e){return Ue(zt(e>>>0))}function wl(){return Ue({})}function gl(e){for(var t=Ie(e>>>=0);t.length;){var n=t.pop();t.pop()(n)}Br(e)}function bl(e,t,n){t>>>=0,n>>>=0,e=Ie(e>>>0),t=Ie(t),n=Ie(n),e[t]=n}function vl(e,t){e=Se(e),t>>>=0,e=new Date(1e3*e),(b(),k)[t>>>2>>>0]=e.getUTCSeconds(),(b(),k)[t+4>>>2>>>0]=e.getUTCMinutes(),(b(),k)[t+8>>>2>>>0]=e.getUTCHours(),(b(),k)[t+12>>>2>>>0]=e.getUTCDate(),(b(),k)[t+16>>>2>>>0]=e.getUTCMonth(),(b(),k)[t+20>>>2>>>0]=e.getUTCFullYear()-1900,(b(),k)[t+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,(b(),k)[t+28>>>2>>>0]=e}var oo=e=>e%4==0&&(e%100!=0||e%400==0),ao=[0,31,60,91,121,152,182,213,244,274,305,335],io=[0,31,59,90,120,151,181,212,243,273,304,334];function Tl(e,t){e=Se(e),t>>>=0,e=new Date(1e3*e),(b(),k)[t>>>2>>>0]=e.getSeconds(),(b(),k)[t+4>>>2>>>0]=e.getMinutes(),(b(),k)[t+8>>>2>>>0]=e.getHours(),(b(),k)[t+12>>>2>>>0]=e.getDate(),(b(),k)[t+16>>>2>>>0]=e.getMonth(),(b(),k)[t+20>>>2>>>0]=e.getFullYear()-1900,(b(),k)[t+24>>>2>>>0]=e.getDay();var n=(oo(e.getFullYear())?ao:io)[e.getMonth()]+e.getDate()-1|0;(b(),k)[t+28>>>2>>>0]=n,(b(),k)[t+36>>>2>>>0]=-60*e.getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();var o=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(n!=o&&e.getTimezoneOffset()==Math.min(o,n)),(b(),k)[t+32>>>2>>>0]=e}function El(e){e>>>=0;var t=new Date((b(),k)[e+20>>>2>>>0]+1900,(b(),k)[e+16>>>2>>>0],(b(),k)[e+12>>>2>>>0],(b(),k)[e+8>>>2>>>0],(b(),k)[e+4>>>2>>>0],(b(),k)[e>>>2>>>0],0),n=(b(),k)[e+32>>>2>>>0],o=t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,r);return 0>n?(b(),k)[e+32>>>2>>>0]=+(r!=i&&s==o):0<n!=(s==o)&&(r=Math.max(i,r),t.setTime(t.getTime()+6e4*((0<n?s:r)-o))),(b(),k)[e+24>>>2>>>0]=t.getDay(),n=(oo(t.getFullYear())?ao:io)[t.getMonth()]+t.getDate()-1|0,(b(),k)[e+28>>>2>>>0]=n,(b(),k)[e>>>2>>>0]=t.getSeconds(),(b(),k)[e+4>>>2>>>0]=t.getMinutes(),(b(),k)[e+8>>>2>>>0]=t.getHours(),(b(),k)[e+12>>>2>>>0]=t.getDate(),(b(),k)[e+16>>>2>>>0]=t.getMonth(),(b(),k)[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),BigInt(isNaN(e)?-1:e/1e3)}function so(e,t,n,o,r,i,s){return d?ae(16,1,e,t,n,o,r,i,s):-52}function uo(e,t,n,o,r,i){if(d)return ae(17,1,e,t,n,o,r,i)}var Lt={},Sl=()=>performance.timeOrigin+performance.now();function fo(e,t){if(d)return ae(18,1,e,t);if(Lt[e]&&(clearTimeout(Lt[e].id),delete Lt[e]),!t)return 0;var n=setTimeout(()=>{delete Lt[e],Cr(()=>Go(e,performance.timeOrigin+performance.now()))},t);return Lt[e]={id:n,tl:t},0}function Al(e,t,n,o){e>>>=0,t>>>=0,n>>>=0,o>>>=0;var r=new Date().getFullYear(),i=new Date(r,0,1).getTimezoneOffset();r=new Date(r,6,1).getTimezoneOffset();var s=Math.max(i,r);(b(),P)[e>>>2>>>0]=60*s,(b(),k)[t>>>2>>>0]=+(i!=r),e=(t=u=>{var c=Math.abs(u);return`UTC${0<=u?"-":"+"}${String(Math.floor(c/60)).padStart(2,"0")}${String(c%60).padStart(2,"0")}`})(i),t=t(r),r<i?(Fe(e,n,17),Fe(t,o,17)):(Fe(e,o,17),Fe(t,n,17))}var xl=()=>Date.now(),Il=1;function Ll(e,t,n){if(n>>>=0,!(0<=e&&3>=e))return 28;if(e===0)e=Date.now();else{if(!Il)return 52;e=performance.timeOrigin+performance.now()}return e=Math.round(1e6*e),(b(),J)[n>>>3>>>0]=BigInt(e),0}var kr=[],co=(e,t)=>{kr.length=0;for(var n;n=(b(),ne)[e++>>>0];){var o=n!=105;t+=(o&=n!=112)&&t%8?4:0,kr.push(n==112?(b(),P)[t>>>2>>>0]:n==106?(b(),J)[t>>>3>>>0]:n==105?(b(),k)[t>>>2>>>0]:(b(),pe)[t>>>3>>>0]),t+=o?8:4}return kr};function Ol(e,t,n){return e>>>=0,t=co(t>>>0,n>>>0),Gr[e](...t)}function Bl(e,t,n){return e>>>=0,t=co(t>>>0,n>>>0),Gr[e](...t)}var Ml=()=>{};function Cl(e,t){return Z(gt(e>>>0,t>>>0))}var Ul=()=>{throw ue+=1,"unwind"};function Dl(){return 4294901760}var Pl=()=>1,_l=()=>navigator.hardwareConcurrency,ot={},lo=e=>{var t=Ge(e)+1,n=Tt(t);return n&&Fe(e,n,t),n};function Vt(e){if(!(2147483648&(e>>>=0)))return be("Cannot use emscripten_pc_get_function on native functions without -sUSE_OFFSET_CONVERTER"),0;if(!(e=ot[e]))return 0;var t;if(t=/^\s+at (.*) \(.*\)$/.exec(e))e=t[1];else{if(!(t=/^(.+?)@/.exec(e)))return 0;e=t[1]}return Le(Vt.Yj??0),Vt.Yj=lo(e),Vt.Yj}function kl(e){e>>>=0;var t=(b(),ne).length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);e:{o=(Math.min(4294901760,65536*Math.ceil(Math.max(e,o)/65536))-Be.buffer.byteLength+65535)/65536|0;try{Be.grow(o),Ve();var r=1;break e}catch{}r=void 0}if(r)return!0}return!1}var Ht=e=>{var t;if(t=/\bwasm-function\[\d+\]:(0x[0-9a-f]+)/.exec(e))return+t[1];if(/\bwasm-function\[(\d+)\]:(\d+)/.exec(e))be("Legacy backtrace format detected but -sUSE_OFFSET_CONVERTER not present.");else if(t=/:(\d+):\d+(?:\)|$)/.exec(e))return 2147483648|+t[1];return 0},po=e=>{e.forEach(t=>{var n=Ht(t);n&&(ot[n]=t)})};function Rl(){var e=Error().stack.toString().split(`
`);return e[0]=="Error"&&e.shift(),po(e),ot.Kj=Ht(e[3]),ot.gl=e,ot.Kj}function Nl(e,t,n){if(e>>>=0,t>>>=0,ot.Kj==e)var o=ot.gl;else(o=Error().stack.toString().split(`
`))[0]=="Error"&&o.shift(),po(o);for(var r=3;o[r]&&Ht(o[r])!=e;)++r;for(e=0;e<n&&o[e+r];++e)(b(),k)[t+4*e>>>2>>>0]=Ht(o[e+r]);return e}var $e=e=>{var t=Ge(e)+1,n=Jt(t);return Fe(e,n,t),n},Rr=[],ve=(e,t)=>{Rr[e>>>=0]=t},ke=[],qt=[],Ot=(e,t)=>{qt[e]=new Promise(n=>t.finally(()=>n(e)))},R=e=>{if(e)return Rr[e>>>0]},Yt=(e,t,n)=>{(b(),P)[e>>>2>>>0]=t,(b(),P)[e+4>>>2>>>0]=n},ho=e=>{var t=(b(),P)[e>>>2>>>0];return e=(b(),P)[e+4>>>2>>>0],gt(t,e)},je=e=>{var t=(b(),P)[e>>>2>>>0];return e=(b(),P)[e+4>>>2>>>0],t?gt(t,e):e===0?"":void 0},mo=(e,t)=>{function n(r,i){r=e[r],(b(),k)[t+i>>>2>>>0]=r}function o(r,i){r=e[r],(b(),J)[t+i>>>3>>>0]=BigInt(r)}n("maxTextureDimension1D",4),n("maxTextureDimension2D",8),n("maxTextureDimension3D",12),n("maxTextureArrayLayers",16),n("maxBindGroups",20),n("maxBindGroupsPlusVertexBuffers",24),n("maxBindingsPerBindGroup",28),n("maxDynamicUniformBuffersPerPipelineLayout",32),n("maxDynamicStorageBuffersPerPipelineLayout",36),n("maxSampledTexturesPerShaderStage",40),n("maxSamplersPerShaderStage",44),n("maxStorageBuffersPerShaderStage",48),n("maxStorageTexturesPerShaderStage",52),n("maxUniformBuffersPerShaderStage",56),n("minUniformBufferOffsetAlignment",80),n("minStorageBufferOffsetAlignment",84),o("maxUniformBufferBindingSize",64),o("maxStorageBufferBindingSize",72),n("maxVertexBuffers",88),o("maxBufferSize",96),n("maxVertexAttributes",104),n("maxVertexBufferArrayStride",108),n("maxInterStageShaderVariables",112),n("maxColorAttachments",116),n("maxColorAttachmentBytesPerSample",120),n("maxComputeWorkgroupStorageSize",124),n("maxComputeInvocationsPerWorkgroup",128),n("maxComputeWorkgroupSizeX",132),n("maxComputeWorkgroupSizeY",136),n("maxComputeWorkgroupSizeZ",140),n("maxComputeWorkgroupsPerDimension",144),e.rl!==void 0&&n("maxImmediateSize",148)},Wl=[,"validation","out-of-memory","internal"],Fl=[,"compatibility","core"],Nr={1:"core-features-and-limits",2:"depth-clip-control",3:"depth32float-stencil8",4:"texture-compression-bc",5:"texture-compression-bc-sliced-3d",6:"texture-compression-etc2",7:"texture-compression-astc",8:"texture-compression-astc-sliced-3d",9:"timestamp-query",10:"indirect-first-instance",11:"shader-f16",12:"rg11b10ufloat-renderable",13:"bgra8unorm-storage",14:"float32-filterable",15:"float32-blendable",16:"clip-distances",17:"dual-source-blending",18:"subgroups",19:"texture-formats-tier1",20:"texture-formats-tier2",21:"primitive-index",327692:"chromium-experimental-unorm16-texture-formats",327693:"chromium-experimental-snorm16-texture-formats",327732:"chromium-experimental-multi-draw-indirect"},Gl=[,"low-power","high-performance"],$l=[,"occlusion","timestamp"],jl={undefined:1,unknown:1,destroyed:2};function zl(e,t,n,o,r,i){t=Se(t),n=Se(n),o>>>=0,r>>>=0,i>>>=0,e=R(e>>>0);var s={};if(i){var u=(b(),P)[i+12>>>2>>>0];if(u){var c=(b(),P)[i+16>>>2>>>0];s.requiredFeatures=Array.from((b(),P).subarray(c>>>2>>>0,c+4*u>>>2>>>0),x=>Nr[x])}var h=(b(),P)[i+20>>>2>>>0];if(h){let x=function(U,D,N=!1){D=h+D,(D=(b(),P)[D>>>2>>>0])==4294967295||N&&D==0||(m[U]=D)},O=function(U,D){D=h+D;var N=(b(),P)[D>>>2>>>0],j=(b(),P)[D+4>>>2>>>0];N==4294967295&&j==4294967295||(m[U]=4294967296*(b(),P)[D+4>>>2>>>0]+(b(),P)[D>>>2>>>0])};var T=x,A=O,m={};x("maxTextureDimension1D",4),x("maxTextureDimension2D",8),x("maxTextureDimension3D",12),x("maxTextureArrayLayers",16),x("maxBindGroups",20),x("maxBindGroupsPlusVertexBuffers",24),x("maxDynamicUniformBuffersPerPipelineLayout",32),x("maxDynamicStorageBuffersPerPipelineLayout",36),x("maxSampledTexturesPerShaderStage",40),x("maxSamplersPerShaderStage",44),x("maxStorageBuffersPerShaderStage",48),x("maxStorageTexturesPerShaderStage",52),x("maxUniformBuffersPerShaderStage",56),x("minUniformBufferOffsetAlignment",80),x("minStorageBufferOffsetAlignment",84),O("maxUniformBufferBindingSize",64),O("maxStorageBufferBindingSize",72),x("maxVertexBuffers",88),O("maxBufferSize",96),x("maxVertexAttributes",104),x("maxVertexBufferArrayStride",108),x("maxInterStageShaderVariables",112),x("maxColorAttachments",116),x("maxColorAttachmentBytesPerSample",120),x("maxComputeWorkgroupStorageSize",124),x("maxComputeInvocationsPerWorkgroup",128),x("maxComputeWorkgroupSizeX",132),x("maxComputeWorkgroupSizeY",136),x("maxComputeWorkgroupSizeZ",140),x("maxComputeWorkgroupsPerDimension",144),x("maxImmediateSize",148,!0),s.requiredLimits=m}(u=(b(),P)[i+24>>>2>>>0])&&(u={label:je(u+4)},s.defaultQueue=u),s.label=je(i+4)}ue+=1,Ot(t,e.requestDevice(s).then(x=>{--ue,ve(r,x.queue),ve(o,x),n&&(ue+=1,Ot(n,x.lost.then(O=>{--ue,x.onuncapturederror=()=>{};var U=w(),D=$e(O.message);zr(n,jl[O.reason],D),y(U)}))),x.onuncapturederror=O=>{var U=5;O.error instanceof GPUValidationError?U=2:O.error instanceof GPUOutOfMemoryError?U=3:O.error instanceof GPUInternalError&&(U=4);var D=w();O=$e(O.error.message),Ro(o,U,O),y(D)},qr(t,1,o,0)},x=>{--ue;var O=w();x=$e(x.message),qr(t,3,o,x),n&&zr(n,4,x),y(O)}))}function Vl(e){var t=R(e>>>=0),n=ke[e];if(n){for(var o=0;o<n.length;++o)n[o]();delete ke[e]}t.destroy()}var vt=()=>{var e="getMappedRange size=0 no longer means WGPU_WHOLE_MAP_SIZE";vt.vg||(vt.vg={}),vt.vg[e]||(vt.vg[e]=1,Z(e))};function Hl(e,t,n){t>>>=0,n>>>=0;var o=R(e>>>=0);n===0&&vt(),n==4294967295&&(n=void 0);try{var r=o.getMappedRange(t,n)}catch{return 0}var i=Xr(16,r.byteLength);return(b(),ne).set(new Uint8Array(r),i>>>0),ke[e].push(()=>Le(i)),i}function ql(e,t,n){t>>>=0,n>>>=0;var o=R(e>>>=0);n===0&&vt(),n==4294967295&&(n=void 0);try{var r=o.getMappedRange(t,n)}catch{return 0}var i=Xr(16,r.byteLength);return(b(),ne).fill(0,i,r.byteLength),ke[e].push(()=>{new Uint8Array(r).set((b(),ne).subarray(i>>>0,i+r.byteLength>>>0)),Le(i)}),i}function Yl(e,t,n,o,r){e>>>=0,t=Se(t),n=Se(n),r>>>=0;var i=R(e);ke[e]=[],r==4294967295&&(r=void 0),ue+=1,Ot(t,i.mapAsync(n,o>>>0,r).then(()=>{--ue,Vr(t,1,0)},s=>{--ue,w();var u=$e(s.message);Vr(t,s.name==="AbortError"?4:s.name==="OperationError"?3:0,u),delete ke[e]}))}function Jl(e){var t=R(e>>>=0),n=ke[e];if(n){for(var o=0;o<n.length;++o)n[o]();delete ke[e],t.unmap()}}function Xl(e){delete Rr[e>>>0]}function Zl(e,t,n){e>>>=0,t>>>=0,n>>>=0;var o=!!(b(),P)[t+32>>>2>>>0];t={label:je(t+4),usage:(b(),P)[t+16>>>2>>>0],size:4294967296*(b(),P)[t+28>>>2>>>0]+(b(),P)[t+24>>>2>>>0],mappedAtCreation:o},e=R(e);try{var r=e.createBuffer(t)}catch{return!1}return ve(n,r),o&&(ke[n]=[]),!0}function Ql(e,t,n){e>>>=0,t>>>=0,n>>>=0;var o=(b(),P)[t>>>2>>>0],r=(b(),P)[o+4>>>2>>>0];t={label:je(t+4),code:""},r===2&&(t.code=ho(o+8)),ve(n,R(e).createShaderModule(t))}var Kl=e=>{(e=R(e)).onuncapturederror=null,e.destroy()};function ed(e,t){t=Se(t),e=R(e>>>0),ue+=1,Ot(t,e.popErrorScope().then(n=>{--ue;var o=5;n?n instanceof GPUValidationError?o=2:n instanceof GPUOutOfMemoryError?o=3:n instanceof GPUInternalError&&(o=4):o=1;var r=w();n=n?$e(n.message):0,Hr(t,1,o,n),y(r)},n=>{--ue;var o=w();n=$e(n.message),Hr(t,1,5,n),y(o)}))}function td(e,t,n,o){if(t=Se(t),o>>>=0,n>>>=0){var r=(b(),P)[n+4>>>2>>>0];r={featureLevel:Fl[r],powerPreference:Gl[(b(),P)[n+8>>>2>>>0]],forceFallbackAdapter:!!(b(),P)[n+12>>>2>>>0]},(n=(b(),P)[n>>>2>>>0])!==0&&(b(),r.wl=!!(b(),P)[n+8>>>2>>>0])}"gpu"in navigator?(ue+=1,Ot(t,navigator.gpu.requestAdapter(r).then(i=>{if(--ue,i)ve(o,i),Bt(t,1,o,0);else{i=w();var s=$e("WebGPU not available on this browser (requestAdapter returned null)");Bt(t,3,o,s),y(i)}},i=>{--ue;var s=w();i=$e(i.message),Bt(t,4,o,i),y(s)}))):(n=w(),r=$e("WebGPU not available on this browser (navigator.gpu is not available)"),Bt(t,3,o,r),y(n))}function rd(e,t,n){return e>>>=0,t>>>=0,n>>>=0,ro(async()=>{var o=[];if(n){var r=(b(),k)[n>>>2>>>0];o.length=t+1,o[t]=new Promise(u=>setTimeout(u,r,0))}else o.length=t;for(var i=0;i<t;++i){var s=4294967296*(b(),P)[e+8*i+4>>>2>>>0]+(b(),P)[e+8*i>>>2>>>0];if(!(s in qt))return s;o[i]=qt[s]}return o=await Promise.race(o),delete qt[o],o})}var Wr,Fr={},yo=()=>{if(!Wr){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(e in Fr)Fr[e]===void 0?delete t[e]:t[e]=Fr[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);Wr=n}return Wr};function wo(e,t){if(d)return ae(19,1,e,t);e>>>=0,t>>>=0;var n,o=0,r=0;for(n of yo()){var i=t+o;(b(),P)[e+r>>>2>>>0]=i,o+=Fe(n,i,1/0)+1,r+=4}return 0}function go(e,t){if(d)return ae(20,1,e,t);e>>>=0,t>>>=0;var n=yo();for(var o of((b(),P)[e>>>2>>>0]=n.length,e=0,n))e+=Ge(o)+1;return(b(),P)[t>>>2>>>0]=e,0}function bo(e){return d?ae(21,1,e):52}function vo(e,t,n,o){return d?ae(22,1,e,t,n,o):52}function To(e,t,n,o){return d?ae(23,1,e,t,n,o):70}var nd=[null,[],[]];function Eo(e,t,n,o){if(d)return ae(24,1,e,t,n,o);t>>>=0,n>>>=0,o>>>=0;for(var r=0,i=0;i<n;i++){var s=(b(),P)[t>>>2>>>0],u=(b(),P)[t+4>>>2>>>0];t+=8;for(var c=0;c<u;c++){var h=e,m=(b(),ne)[s+c>>>0],T=nd[h];m===0||m===10?((h===1?Q:Z)(kn(T)),T.length=0):T.push(m)}r+=u}return(b(),P)[o>>>2>>>0]=r,0}function od(e){return e>>>0}function ad(e,t){return mo(R(e>>>0).limits,t>>>0),1}function id(e,t){return R(e>>>0).features.has(Nr[t])}function sd(e){return BigInt(R(e>>>0).size)}function ud(e){return BigInt(R(e>>>0).usage)}function fd(e,t){if(e>>>=0,t>>>=0){var n=je(t+4);n={label:n,timestampWrites:t=(t=(b(),P)[t+12>>>2>>>0])!==0?{querySet:R((b(),P)[t+4>>>2>>>0]),beginningOfPassWriteIndex:(b(),P)[t+8>>>2>>>0],endOfPassWriteIndex:(b(),P)[t+12>>>2>>>0]}:void 0}}return e=R(e),t=Co(0),ve(t,e.beginComputePass(n)),t}function cd(e,t,n,o,r,i){n=Se(n),r=Se(r),i=Se(i),R(e>>>0).copyBufferToBuffer(R(t>>>0),n,R(o>>>0),r,i)}function ld(e){e=R(e>>>0);var t=Bo(0);return ve(t,e.finish()),t}function dd(e,t,n,o,r,i){i=Se(i),R(e>>>0).resolveQuerySet(R(t>>>0),n,o,R(r>>>0),i)}function pd(e,t,n,o){R(e>>>0).dispatchWorkgroups(t,n,o)}function hd(e,t,n){n=Se(n),R(e>>>0).dispatchWorkgroupsIndirect(R(t>>>0),n)}function md(e){R(e>>>0).end()}function yd(e,t,n,o,r){o>>>=0,r>>>=0,e=R(e>>>0),n=R(n>>>0),o==0?e.setBindGroup(t,n):e.setBindGroup(t,n,(b(),P),r>>>2,o)}function wd(e,t){R(e>>>0).setPipeline(R(t>>>0))}function gd(e,t,n){R(e>>>0).vl(R(t>>>0),n)}function bd(e,t){e=R(e>>>0);var n=Oo(0);return ve(n,e.getBindGroupLayout(t)),n}function vd(e,t){e>>>=0;var n=je(4+(t>>>=0)),o=R((b(),P)[t+12>>>2>>>0]),r=(b(),P)[t+16>>>2>>>0];t=(b(),P)[t+20>>>2>>>0];for(var i=[],s=0;s<r;++s){var u=i,c=u.push,h=t+40*s,m=(b(),P)[h+8>>>2>>>0],T=(b(),P)[h+32>>>2>>>0],A=(b(),P)[h+36>>>2>>>0],x=(b(),P)[h+4>>>2>>>0];m?(T=h+24,(T=(b(),P)[T>>>2>>>0]+4294967296*(b(),k)[T+4>>>2>>>0])==-1&&(T=void 0),h={binding:x,resource:{buffer:R(m),offset:4294967296*(b(),P)[h+4+16>>>2>>>0]+(b(),P)[h+16>>>2>>>0],size:T}}):h=T?{binding:x,resource:R(T)}:{binding:x,resource:R(A)},c.call(u,h)}return n={label:n,layout:o,entries:i},e=R(e),o=Lo(0),ve(o,e.createBindGroup(n)),o}function Td(e,t){var n;return e>>>=0,(t>>>=0)&&(n={label:je(t+4)}),e=R(e),t=Mo(0),ve(t,e.createCommandEncoder(n)),t}function Ed(e,t){e>>>=0;var n=t>>>0;t=je(n+4);var o=(o=(b(),P)[n+12>>>2>>>0])?R(o):"auto";if(n+=16){var r=R((b(),P)[n+4>>>2>>>0]),i=(b(),P)[n+16>>>2>>>0],s=(b(),P)[n+20>>>2>>>0];if(i){for(var u={},c=0;c<i;++c){var h=s+24*c;u[ho(h+4)]=(b(),pe)[h+16>>>3>>>0]}i=u}else i=void 0;n={module:r,constants:i,entryPoint:je(n+8)}}else n=void 0;return t={label:t,layout:o,compute:n},e=R(e),o=Uo(0),ve(o,e.createComputePipeline(t)),o}function Sd(e,t){e>>>=0,t>>>=0,t={type:$l[(b(),P)[t+12>>>2>>>0]],count:(b(),P)[t+16>>>2>>>0]},e=R(e);var n=Do(0);return ve(n,e.createQuerySet(t)),n}function Ad(e,t){e=R(e>>>0).adapterInfo,t>>>=0,(b(),k)[t+52>>>2>>>0]=e.subgroupMinSize,(b(),k)[t+56>>>2>>>0]=e.subgroupMaxSize;var n=lo(e.vendor+e.architecture+e.device+e.description),o=Ge(e.vendor);return Yt(t+4,n,o),n+=o,o=Ge(e.architecture),Yt(t+12,n,o),n+=o,o=Ge(e.device),Yt(t+20,n,o),Yt(t+28,n+o,Ge(e.description)),(b(),k)[t+36>>>2>>>0]=2,e=e.isFallbackAdapter?3:4,(b(),k)[t+40>>>2>>>0]=e,(b(),k)[t+44>>>2>>>0]=0,(b(),k)[t+48>>>2>>>0]=0,1}var xd={"core-features-and-limits":1,"depth-clip-control":2,"depth32float-stencil8":3,"texture-compression-bc":4,"texture-compression-bc-sliced-3d":5,"texture-compression-etc2":6,"texture-compression-astc":7,"texture-compression-astc-sliced-3d":8,"timestamp-query":9,"indirect-first-instance":10,"shader-f16":11,"rg11b10ufloat-renderable":12,"bgra8unorm-storage":13,"float32-filterable":14,"float32-blendable":15,"clip-distances":16,"dual-source-blending":17,subgroups:18,"texture-formats-tier1":19,"texture-formats-tier2":20,"primitive-index":21,"chromium-experimental-unorm16-texture-formats":327692,"chromium-experimental-snorm16-texture-formats":327693,"chromium-experimental-multi-draw-indirect":327732};function Id(e,t){t>>>=0,e=R(e>>>0);var n=Tt(4*e.features.size),o=0,r=0;e.features.forEach(i=>{0<=(i=xd[i])&&((b(),k)[n+o>>>2>>>0]=i,o+=4,r++)}),(b(),P)[t+4>>>2>>>0]=n,(b(),P)[t>>>2>>>0]=r}function Ld(e,t){return mo(R(e>>>0).limits,t>>>0),1}function Od(e,t){return R(e>>>0).features.has(Nr[t])}function Bd(e,t){R(e>>>0).pushErrorScope(Wl[t])}function Md(e,t,n){t>>>=0,n>>>=0,e=R(e>>>0),t=Array.from((b(),k).subarray(n>>>2>>>0,n+4*t>>>2>>>0),o=>R(o)),e.submit(t)}function Cd(e,t,n,o,r){n=Se(n),o>>>=0,r>>>=0,e=R(e>>>0),t=R(t>>>0),o=(b(),ne).subarray(o>>>0,o+r>>>0),e.writeBuffer(t,n,o,0,r)}d||function(){for(var e=a.numThreads-1;e--;)Bn();Ne.push(()=>{tt++,function(t){d?t():Promise.all(He.map(On)).then(t)}(()=>Me())})}(),d||(Be=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),Ve()),a.wasmBinary&&(M=a.wasmBinary),a.stackSave=()=>w(),a.stackRestore=e=>y(e),a.stackAlloc=e=>Jt(e),a.setValue=function(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":(b(),ee)[e>>>0]=t;break;case"i16":(b(),Re)[e>>>1>>>0]=t;break;case"i32":(b(),k)[e>>>2>>>0]=t;break;case"i64":(b(),J)[e>>>3>>>0]=BigInt(t);break;case"float":(b(),te)[e>>>2>>>0]=t;break;case"double":(b(),pe)[e>>>3>>>0]=t;break;case"*":(b(),P)[e>>>2>>>0]=t;break;default:be(`invalid type for setValue: ${n}`)}},a.getValue=function(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return(b(),ee)[e>>>0];case"i16":return(b(),Re)[e>>>1>>>0];case"i32":return(b(),k)[e>>>2>>>0];case"i64":return(b(),J)[e>>>3>>>0];case"float":return(b(),te)[e>>>2>>>0];case"double":return(b(),pe)[e>>>3>>>0];case"*":return(b(),P)[e>>>2>>>0];default:be(`invalid type for getValue: ${t}`)}},a.UTF8ToString=gt,a.stringToUTF8=Fe,a.lengthBytesUTF8=Ge;var Ud=[Ar,An,Un,Rn,Nn,Wn,Fn,Gn,$n,jn,zn,Vn,Hn,qn,Yn,Jn,so,uo,fo,wo,go,bo,vo,To,Eo],Gr={1703556:(e,t,n,o,r)=>{if(a===void 0||!a.pg)return 1;if((e=gt(Number(e>>>0))).startsWith("./")&&(e=e.substring(2)),!(e=a.pg.get(e)))return 2;if(t=Number(t>>>0),n=Number(n>>>0),o=Number(o>>>0),t+n>e.byteLength)return 3;try{let i=e.subarray(t,t+n);switch(r){case 0:(b(),ne).set(i,o>>>0);break;case 1:a.$j?a.$j(o,i):a.ql(o,i);break;default:return 4}return 0}catch{return 4}},1704380:(e,t,n)=>{a.Qk(e,(b(),ne).subarray(t>>>0,t+n>>>0))},1704444:()=>a.ol(),1704486:e=>{a.Pk(e)},1704523:()=>typeof wasmOffsetConverter<"u"};function Dd(){return typeof wasmOffsetConverter<"u"}var So,Ao,$r,jr,Le,Tt,xo,Io,Lo,Oo,Bo,Mo,Co,Uo,Do,Po,_o,ko,zr,Vr,Hr,Bt,qr,Ro,Yr,No,Wo,Fo,Jr,Go,$o,Xr,g,Mt,jo,y,Jt,w,zo,Vo,Ho,qo,Yo,Zr,Jo,Xo,Zo,Qo,Ko,ea,ta,ra,na,oa,aa,ia,sa,ua,fa,ca,la,da,pa,ha,ma,ya,wa,ga,ba,va,Ta,Ea,Sa,Aa,xa,Ia,La,Oa,Ba,Ma,Ca,Ua,Da,Pa,_a,ka,Ra,Na,Wa,Fa,Ga,$a,ja,za,Va,Ha,qa,Ya,Ja,Xa,Za,Qa,Ka,ei,ti,ri,ni,oi,ai,ii,si,ui,fi,ci,li,di,pi,hi,mi,yi,wi,gi,bi,vi,Ti,Ei,Si,Ai,xi,Ii,Li,Oi,Bi,Mi,Ci,Ui,Di,Pi,_i,ki,Ri,Ni,Wi,Fi,Gi,$i,ji,zi,Vi,Hi,qi,Yi,Ji,Xi,Zi,Qi,Ki,es,ts,rs,ns,os,as,is,ss,us,fs,cs,ls,ds,ps,hs,ms,ys,ws,gs,bs,vs,Ts,Es,Ss,As,xs,Is,Ls,Os,Bs,Ms,Cs,Us,Ds,Ps,_s,ks,Rs,Ns,Ws,Fs,Gs,$s,js,zs,Vs,Hs,qs,Ys,Js,Xs,Zs,Qs,Ks,eu,tu,ru,nu,ou,au,iu,su,uu,fu,cu,lu,du,pu,hu,mu,yu,wu,gu,bu,vu,Tu,Eu,Su,Au,xu,Iu,Lu,Ou,Bu,Mu,Cu,Uu,Du,Pu,_u,ku,Ru,Nu,Wu,Fu,Gu,$u,ju,zu,Vu,Hu,qu,Ye=await async function(){function e(o,r){var i=Ye=o.exports;o={};for(let[s,u]of Object.entries(i))typeof u=="function"?(i=el(u),o[s]=i):o[s]=u;return Ye=o,Ye=function(){var s=Ye,u=h=>m=>h(m)>>>0,c=h=>()=>h()>>>0;return(s=Object.assign({},s)).vf=u(s.vf),s.Yf=c(s.Yf),s._f=u(s._f),s.Lg=(h=>(m,T)=>h(m,T)>>>0)(s.Lg),s.Qg=u(s.Qg),s.Rg=c(s.Rg),s.Vg=u(s.Vg),s}(),xn.push(Ye.Cg),_=r,So=(r=Ye).vf,Ao=r.wf,a._OrtInit=r.xf,a._OrtGetLastError=r.yf,a._OrtCreateSessionOptions=r.zf,a._OrtAppendExecutionProvider=r.Af,a._OrtAddFreeDimensionOverride=r.Bf,a._OrtAddSessionConfigEntry=r.Cf,a._OrtReleaseSessionOptions=r.Df,a._OrtCreateSession=r.Ef,a._OrtReleaseSession=r.Ff,a._OrtGetInputOutputCount=r.Gf,a._OrtGetInputOutputMetadata=r.Hf,a._OrtFree=r.If,a._OrtCreateTensor=r.Jf,a._OrtGetTensorData=r.Kf,a._OrtReleaseTensor=r.Lf,a._OrtCreateRunOptions=r.Mf,a._OrtAddRunConfigEntry=r.Nf,a._OrtReleaseRunOptions=r.Of,a._OrtCreateBinding=r.Pf,a._OrtBindInput=r.Qf,a._OrtBindOutput=r.Rf,a._OrtClearBoundOutputs=r.Sf,a._OrtReleaseBinding=r.Tf,a._OrtRunWithBinding=r.Uf,a._OrtRun=r.Vf,a._OrtEndProfiling=r.Wf,a._OrtGetWebGpuDevice=$r=r.Xf,jr=r.Yf,a._free=Le=r.Zf,a._malloc=Tt=r._f,a._wgpuBufferRelease=xo=r.$f,a._wgpuCreateInstance=Io=r.ag,Lo=r.bg,Oo=r.cg,Bo=r.dg,Mo=r.eg,Co=r.fg,Uo=r.gg,Do=r.ig,Po=r.sg,_o=r.tg,ko=r.ug,zr=r.wg,Vr=r.xg,Hr=r.yg,Bt=r.zg,qr=r.Ag,Ro=r.Bg,Yr=r.Eg,No=r.Fg,Wo=r.Gg,Fo=r.Hg,Jr=r.Ig,Go=r.Jg,$o=r.Kg,Xr=r.Lg,g=r.Mg,Mt=r.Ng,jo=r.Og,y=r.Pg,Jt=r.Qg,w=r.Rg,zo=r.Sg,Vo=r.Tg,Ho=r.Ug,qo=r.Vg,Yo=r.Wg,Zr=r.Xg,Jo=r.Yg,Xo=r.Zg,Zo=r._g,Qo=r.$g,Ko=r.ah,ea=r.bh,ta=r.ch,ra=r.dh,na=r.eh,oa=r.fh,aa=r.gh,ia=r.hh,sa=r.ih,ua=r.jh,fa=r.kh,ca=r.lh,la=r.mh,da=r.nh,pa=r.oh,ha=r.ph,ma=r.qh,ya=r.rh,wa=r.sh,ga=r.th,ba=r.uh,va=r.vh,Ta=r.wh,Ea=r.xh,Sa=r.yh,Aa=r.zh,xa=r.Ah,Ia=r.Bh,La=r.Ch,Oa=r.Dh,Ba=r.Eh,Ma=r.Fh,Ca=r.Gh,Ua=r.Hh,Da=r.Ih,Pa=r.Jh,_a=r.Kh,ka=r.Lh,Ra=r.Mh,Na=r.Nh,Wa=r.Oh,Fa=r.Ph,Ga=r.Qh,$a=r.Rh,ja=r.Sh,za=r.Th,Va=r.Uh,Ha=r.Vh,qa=r.Wh,Ya=r.Xh,Ja=r.Yh,Xa=r.Zh,Za=r._h,Qa=r.$h,Ka=r.ai,ei=r.bi,ti=r.ci,ri=r.di,ni=r.ei,oi=r.fi,ai=r.gi,ii=r.hi,si=r.ii,ui=r.ji,fi=r.ki,ci=r.li,li=r.mi,di=r.ni,pi=r.oi,hi=r.pi,mi=r.qi,yi=r.ri,wi=r.si,gi=r.ti,bi=r.ui,vi=r.vi,Ti=r.wi,Ei=r.xi,Si=r.yi,Ai=r.zi,xi=r.Ai,Ii=r.Bi,Li=r.Ci,Oi=r.Di,Bi=r.Ei,Mi=r.Fi,Ci=r.Gi,Ui=r.Hi,Di=r.Ii,Pi=r.Ji,_i=r.Ki,ki=r.Li,Ri=r.Mi,Ni=r.Ni,Wi=r.Oi,Fi=r.Pi,Gi=r.Qi,$i=r.Ri,ji=r.Si,zi=r.Ti,Vi=r.Ui,Hi=r.Vi,qi=r.Wi,Yi=r.Xi,Ji=r.Yi,Xi=r.Zi,Zi=r._i,Qi=r.$i,Ki=r.aj,es=r.bj,ts=r.cj,rs=r.dj,ns=r.ej,os=r.fj,as=r.gj,is=r.hj,ss=r.ij,us=r.jj,fs=r.kj,cs=r.lj,ls=r.mj,ds=r.nj,ps=r.oj,hs=r.pj,ms=r.qj,ys=r.rj,ws=r.sj,gs=r.tj,bs=r.uj,vs=r.vj,Ts=r.wj,Es=r.xj,Ss=r.yj,As=r.zj,xs=r.Aj,Is=r.Bj,Ls=r.Cj,Os=r.Dj,Bs=r.Ej,Ms=r.Fj,Cs=r.Gj,Us=r.Hj,Ds=r.Ij,Ps=r.Jj,_s=r.Lj,ks=r.Mj,Rs=r.Nj,Ns=r.Oj,Ws=r.Pj,Fs=r.Qj,Gs=r.Rj,$s=r.Sj,js=r.Tj,zs=r.Uj,Vs=r.Vj,Hs=r.Wj,qs=r.Xj,Ys=r._j,Js=r.ak,Xs=r.bk,Zs=r.ck,Qs=r.dk,Ks=r.ek,eu=r.fk,tu=r.gk,ru=r.hk,nu=r.ik,ou=r.jk,au=r.kk,iu=r.lk,su=r.mk,uu=r.nk,fu=r.ok,cu=r.pk,lu=r.qk,du=r.rk,pu=r.sk,hu=r.tk,mu=r.uk,yu=r.vk,wu=r.wk,gu=r.xk,bu=r.yk,vu=r.zk,Tu=r.Ak,Eu=r.Bk,Su=r.Ck,Au=r.Dk,xu=r.Ek,Iu=r.Fk,Lu=r.Gk,Ou=r.Hk,Bu=r.Ik,Mu=r.Jk,Cu=r.Kk,Uu=r.Lk,Du=r.Mk,Pu=r.Nk,_u=r.Ok,ku=r.Rk,Ru=r.Sk,Nu=r.Tk,Wu=r.Uk,Fu=r.Vk,Gu=r.Yk,$u=r.Zk,ju=r._k,zu=r.bl,Vu=r.cl,Hu=r.dl,qu=r.el,Me(),Ye}tt++;var t,n=de();return a.instantiateWasm?new Promise(o=>{a.instantiateWasm(n,(r,i)=>{o(e(r,i))})}):d?new Promise(o=>{G=r=>{var i=new WebAssembly.Instance(r,de());o(e(i,r))}}):(mt??=a.locateFile?a.locateFile?a.locateFile("ort-wasm-simd-threaded.asyncify.wasm",C):C+"ort-wasm-simd-threaded.asyncify.wasm":new URL("ort-wasm-simd-threaded.asyncify.wasm",import.meta.url).href,t=await async function(o){var r=mt;if(!M&&typeof WebAssembly.instantiateStreaming=="function"&&!le(r))try{var i=fetch(r,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(i,o)}catch(s){Z(`wasm streaming compile failed: ${s}`),Z("falling back to ArrayBuffer instantiation")}return async function(s,u){try{var c=await async function(h){if(!M)try{var m=await S(h);return new Uint8Array(m)}catch{}if(h==mt&&M)h=new Uint8Array(M);else{if(!I)throw"both async and sync fetching of the wasm failed";h=I(h)}return h}(s);return await WebAssembly.instantiate(c,u)}catch(h){Z(`failed to asynchronously prepare wasm: ${h}`),be(h)}}(r,o)}(n),e(t.instance,t.module))}();function Pd(e,t,n,o){var r=w();try{return Zo(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function _d(e,t,n){var o=w();try{return Jo(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function kd(e,t,n){var o=w();try{Xo(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function Rd(e,t){var n=w();try{return Zr(e,t)}catch(o){if(y(n),o!==o+0)throw o;g(1,0)}}function Nd(e){var t=w();try{Yo(e)}catch(n){if(y(t),n!==n+0)throw n;g(1,0)}}function Wd(e,t,n,o,r,i,s){var u=w();try{return Ko(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Fd(e,t){var n=w();try{na(e,t)}catch(o){if(y(n),o!==o+0)throw o;g(1,0)}}function Gd(e,t){var n=w();try{return ua(e,t)}catch(o){if(y(n),o!==o+0)throw o;return g(1,0),0n}}function $d(e,t,n,o,r){var i=w();try{fa(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function jd(e,t,n,o){var r=w();try{ea(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function zd(e,t,n,o,r,i,s){var u=w();try{ca(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Vd(e,t,n,o,r){var i=w();try{Qo(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Hd(e,t,n,o,r){var i=w();try{return oa(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function qd(e,t,n,o,r,i,s){var u=w();try{aa(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Yd(e,t,n,o,r,i){var s=w();try{ta(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Jd(e){var t=w();try{return pa(e)}catch(n){if(y(t),n!==n+0)throw n;g(1,0)}}function Xd(e,t,n,o){var r=w();try{return ha(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Zd(e,t,n,o,r,i){var s=w();try{ma(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Qd(e,t,n,o){var r=w();try{ya(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Kd(e,t,n,o){var r=w();try{return ga(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;return g(1,0),0n}}function ep(e,t,n,o,r,i,s){var u=w();try{ba(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function tp(e,t,n){var o=w();try{va(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function rp(e,t,n){var o=w();try{return wa(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function np(e,t,n){var o=w();try{return Ea(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function op(e,t,n,o,r){var i=w();try{Ta(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function ap(e,t,n,o,r,i,s,u){var c=w();try{Aa(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function ip(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{return La(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function sp(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{return Oa(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function up(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{Ba(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function fp(e,t,n,o,r,i,s,u,c,h){var m=w();try{Ma(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function cp(e,t,n,o,r,i,s,u,c){var h=w();try{return Ca(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function lp(e,t,n,o,r,i){var s=w();try{return Da(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function dp(e,t,n,o,r,i,s){var u=w();try{ia(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function pp(e,t,n,o,r,i,s,u,c){var h=w();try{return Ia(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function hp(e,t){var n=w();try{return Pa(e,t)}catch(o){if(y(n),o!==o+0)throw o;g(1,0)}}function mp(e,t){var n=w();try{return ka(e,t)}catch(o){if(y(n),o!==o+0)throw o;g(1,0)}}function yp(e,t,n,o){var r=w();try{la(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function wp(e,t,n,o,r,i,s){var u=w();try{si(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function gp(e,t,n,o,r,i,s){var u=w();try{Ua(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function bp(e,t,n,o,r,i,s,u){var c=w();try{js(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function vp(e,t,n,o){var r=w();try{xa(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Tp(e,t,n,o,r,i,s,u,c){var h=w();try{return Wa(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Ep(e,t,n,o,r,i,s,u,c){var h=w();try{ra(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Sp(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{Fa(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function Ap(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{Ga(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function xp(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{return $a(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function Ip(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{ja(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function Lp(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U){var D=w();try{za(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U)}catch(N){if(y(D),N!==N+0)throw N;g(1,0)}}function Op(e,t,n,o){var r=w();try{Va(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Bp(e,t,n){var o=w();try{Ha(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function Mp(e,t,n,o,r){var i=w();try{qa(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Cp(e,t,n){var o=w();try{return Ra(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;return g(1,0),0n}}function Up(e,t,n,o,r,i,s,u){var c=w();try{return Ya(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Dp(e,t,n,o,r){var i=w();try{Ja(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Pp(e,t,n,o,r){var i=w();try{Xa(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function _p(e,t,n,o,r,i,s){var u=w();try{return Za(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function kp(e,t,n){var o=w();try{return Qa(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;return g(1,0),0n}}function Rp(e,t,n,o,r){var i=w();try{Ka(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Np(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{sa(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function Wp(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{ei(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function Fp(e,t,n,o,r,i,s){var u=w();try{ti(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Gp(e,t,n,o){var r=w();try{ri(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function $p(e,t,n){var o=w();try{ni(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function jp(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{oi(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function zp(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{ai(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function Vp(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{ii(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function Hp(e,t,n,o,r,i,s,u,c){var h=w();try{ui(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function qp(e,t,n,o,r,i,s,u,c,h){var m=w();try{fi(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function Yp(e,t,n,o,r,i){var s=w();try{li(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Jp(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{di(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function Xp(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N){var j=w();try{pi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N)}catch(H){if(y(j),H!==H+0)throw H;g(1,0)}}function Zp(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D){var N=w();try{hi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D)}catch(j){if(y(N),j!==j+0)throw j;g(1,0)}}function Qp(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U){var D=w();try{mi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U)}catch(N){if(y(D),N!==N+0)throw N;g(1,0)}}function Kp(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{yi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function eh(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie){var fe=w();try{wi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie)}catch(ye){if(y(fe),ye!==ye+0)throw ye;g(1,0)}}function th(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j){var H=w();try{gi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j)}catch(ie){if(y(H),ie!==ie+0)throw ie;g(1,0)}}function rh(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N){var j=w();try{bi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N)}catch(H){if(y(j),H!==H+0)throw H;g(1,0)}}function nh(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie){var fe=w();try{vi(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie)}catch(ye){if(y(fe),ye!==ye+0)throw ye;g(1,0)}}function oh(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{Ti(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function ah(e,t,n,o,r,i,s,u,c,h){var m=w();try{Ei(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function ih(e,t,n,o,r,i,s,u){var c=w();try{return Si(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;return g(1,0),0n}}function sh(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{Ai(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function uh(e,t,n,o,r,i,s,u,c,h){var m=w();try{xi(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function fh(e,t,n,o,r,i,s,u,c){var h=w();try{Ii(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function ch(e,t,n,o,r,i,s){var u=w();try{return ci(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function lh(e,t,n,o,r){var i=w();try{Li(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function dh(e,t,n){var o=w();try{return Fu(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;return g(1,0),0n}}function ph(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{Oi(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function hh(e,t,n,o,r,i,s,u){var c=w();try{Bi(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function mh(e,t,n,o,r,i,s){var u=w();try{return Mi(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function yh(e,t,n,o,r,i){var s=w();try{Ci(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function wh(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{Ui(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function gh(e,t,n,o,r,i){var s=w();try{return Di(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function bh(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{Pi(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function vh(e,t,n,o,r,i,s,u,c,h){var m=w();try{ki(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function Th(e,t,n,o,r,i){var s=w();try{Vs(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Eh(e,t,n,o,r,i,s,u,c){var h=w();try{_i(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Sh(e,t){var n=w();try{return Gi(e,t)}catch(o){if(y(n),o!==o+0)throw o;g(1,0)}}function Ah(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N){var j=w();try{Wu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N)}catch(H){if(y(j),H!==H+0)throw H;g(1,0)}}function xh(e,t,n,o){var r=w();try{zi(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Ih(e,t,n,o,r,i,s,u){var c=w();try{Vi(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Lh(e,t,n,o,r,i,s){var u=w();try{Hi(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Oh(e,t,n,o,r){var i=w();try{qi(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Bh(e,t,n,o,r){var i=w();try{return ji(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Mh(e,t,n,o){var r=w();try{return $i(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Ch(e,t,n,o,r,i,s,u){var c=w();try{Yi(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Uh(e,t,n,o){var r=w();try{return Nu(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Dh(e,t,n,o,r){var i=w();try{Ji(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Ph(e,t,n,o,r,i){var s=w();try{return Wi(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function _h(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{return Xi(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function kh(e,t,n,o){var r=w();try{return rs(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;return g(1,0),0n}}function Rh(e,t,n,o,r,i){var s=w();try{return Fi(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Nh(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{return Ki(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function Wh(e,t,n,o,r,i,s,u){var c=w();try{es(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Fh(e,t,n,o,r,i,s,u,c){var h=w();try{ts(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Gh(e,t,n,o,r,i,s){var u=w();try{Zi(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function $h(e,t,n,o,r,i){var s=w();try{return Qi(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function jh(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{return ns(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function zh(e,t,n,o,r,i,s){var u=w();try{return os(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Vh(e,t,n,o,r,i){var s=w();try{return as(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Hh(e,t){var n=w();try{return Ri(e,t)}catch(o){if(y(n),o!==o+0)throw o;return g(1,0),0n}}function qh(e,t,n,o,r,i){var s=w();try{return Ni(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Yh(e,t,n,o,r,i,s,u){var c=w();try{return is(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Jh(e,t,n,o,r,i,s,u,c){var h=w();try{ss(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Xh(e,t,n,o,r,i){var s=w();try{return us(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Zh(e,t,n,o,r,i,s,u){var c=w();try{return fs(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Qh(e,t,n,o,r,i){var s=w();try{return cs(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Kh(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{return ls(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function em(e,t,n,o,r,i,s,u){var c=w();try{return ds(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function tm(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{return ps(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function rm(e,t,n,o,r,i,s){var u=w();try{return hs(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function nm(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{return ms(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function om(e,t,n,o,r,i,s){var u=w();try{return ys(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function am(e,t,n,o,r,i,s,u){var c=w();try{ws(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function im(e,t,n,o,r,i,s){var u=w();try{return gs(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function sm(e,t,n){var o=w();try{return bs(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;return g(1,0),0n}}function um(e,t,n,o){var r=w();try{return vs(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function fm(e,t,n,o,r,i,s){var u=w();try{Ts(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function cm(e,t,n,o,r,i,s,u,c){var h=w();try{Es(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function lm(e,t,n,o,r,i,s){var u=w();try{Ss(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function dm(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{As(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function pm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D){var N=w();try{Is(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D)}catch(j){if(y(N),j!==j+0)throw j;g(1,0)}}function hm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U){var D=w();try{Os(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U)}catch(N){if(y(D),N!==N+0)throw N;g(1,0)}}function mm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{return Bs(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function ym(e,t,n,o,r,i,s,u,c,h){var m=w();try{return Ms(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function wm(e,t){var n=w();try{Cs(e,t)}catch(o){if(y(n),o!==o+0)throw o;g(1,0)}}function gm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{_s(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function bm(e,t,n,o,r){var i=w();try{Us(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function vm(e,t,n,o,r,i,s){var u=w();try{Ds(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Tm(e,t,n,o,r,i,s,u){var c=w();try{Ps(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Em(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{ks(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function Sm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D){var N=w();try{return Rs(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D)}catch(j){if(y(N),j!==j+0)throw j;g(1,0)}}function Am(e,t,n,o,r){var i=w();try{return Gu(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function xm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie,fe){var ye=w();try{return Ns(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie,fe)}catch(ze){if(y(ye),ze!==ze+0)throw ze;g(1,0)}}function Im(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{Ws(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function Lm(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{Fs(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function Om(e,t,n,o,r,i,s){var u=w();try{return Gs(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function Bm(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{$s(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function Mm(e,t,n,o,r,i,s,u){var c=w();try{zs(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Cm(e,t,n,o,r,i,s,u,c,h){var m=w();try{Hs(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function Um(e,t,n,o){var r=w();try{return Ls(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Dm(e,t,n,o,r,i,s,u,c,h){var m=w();try{qs(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function Pm(e,t,n,o,r,i){var s=w();try{Ys(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function _m(e,t,n){var o=w();try{return _a(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function km(e,t,n,o,r,i,s,u){var c=w();try{return Js(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Rm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{$u(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function Nm(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{Xs(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function Wm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{Zs(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function Fm(e,t,n,o,r,i,s,u){var c=w();try{Qs(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function Gm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H){var ie=w();try{Ks(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H)}catch(fe){if(y(ie),fe!==fe+0)throw fe;g(1,0)}}function $m(e,t,n,o){var r=w();try{return eu(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function jm(e,t,n){var o=w();try{return Na(e,t,n)}catch(r){if(y(o),r!==r+0)throw r;g(1,0)}}function zm(e,t,n,o,r,i,s,u,c){var h=w();try{tu(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Vm(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{ru(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function Hm(e,t,n,o,r,i){var s=w();try{nu(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function qm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U){var D=w();try{return ou(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U)}catch(N){if(y(D),N!==N+0)throw N;g(1,0)}}function Ym(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{au(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function Jm(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie,fe,ye,ze){var Cy=w();try{iu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie,fe,ye,ze)}catch(Qr){if(y(Cy),Qr!==Qr+0)throw Qr;g(1,0)}}function Xm(e,t,n,o,r,i,s,u,c,h,m,T,A){var x=w();try{su(e,t,n,o,r,i,s,u,c,h,m,T,A)}catch(O){if(y(x),O!==O+0)throw O;g(1,0)}}function Zm(e,t,n,o,r,i,s,u,c,h){var m=w();try{uu(e,t,n,o,r,i,s,u,c,h)}catch(T){if(y(m),T!==T+0)throw T;g(1,0)}}function Qm(e,t,n,o,r,i,s,u,c,h,m,T,A,x){var O=w();try{fu(e,t,n,o,r,i,s,u,c,h,m,T,A,x)}catch(U){if(y(O),U!==U+0)throw U;g(1,0)}}function Km(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{cu(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function ey(e,t,n,o,r,i,s){var u=w();try{lu(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function ty(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H){var ie=w();try{hu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H)}catch(fe){if(y(ie),fe!==fe+0)throw fe;g(1,0)}}function ry(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie){var fe=w();try{ju(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie)}catch(ye){if(y(fe),ye!==ye+0)throw ye;g(1,0)}}function ny(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D){var N=w();try{mu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D)}catch(j){if(y(N),j!==j+0)throw j;g(1,0)}}function oy(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H){var ie=w();try{pu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H)}catch(fe){if(y(ie),fe!==fe+0)throw fe;g(1,0)}}function ay(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j){var H=w();try{du(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j)}catch(ie){if(y(H),ie!==ie+0)throw ie;g(1,0)}}function iy(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N){var j=w();try{yu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N)}catch(H){if(y(j),H!==H+0)throw H;g(1,0)}}function sy(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{wu(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function uy(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie,fe){var ye=w();try{return gu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O,U,D,N,j,H,ie,fe)}catch(ze){if(y(ye),ze!==ze+0)throw ze;g(1,0)}}function fy(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O){var U=w();try{bu(e,t,n,o,r,i,s,u,c,h,m,T,A,x,O)}catch(D){if(y(U),D!==D+0)throw D;g(1,0)}}function cy(e,t,n,o,r,i,s){var u=w();try{vu(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function ly(e,t,n,o,r){var i=w();try{Tu(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function dy(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{Eu(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function py(e,t,n,o,r,i,s){var u=w();try{Su(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function hy(e,t,n,o,r){var i=w();try{Au(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function my(e,t,n,o,r,i,s,u,c,h,m,T){var A=w();try{xs(e,t,n,o,r,i,s,u,c,h,m,T)}catch(x){if(y(A),x!==x+0)throw x;g(1,0)}}function yy(e,t,n,o,r,i){var s=w();try{return xu(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function wy(e,t,n,o,r){var i=w();try{return Iu(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function gy(e,t,n,o,r,i,s,u){var c=w();try{return Lu(e,t,n,o,r,i,s,u)}catch(h){if(y(c),h!==h+0)throw h;g(1,0)}}function by(e,t,n,o,r,i,s,u,c,h,m){var T=w();try{Ou(e,t,n,o,r,i,s,u,c,h,m)}catch(A){if(y(T),A!==A+0)throw A;g(1,0)}}function vy(e,t,n,o,r,i){var s=w();try{return Bu(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function Ty(e,t,n,o,r){var i=w();try{return Cu(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Ey(e,t,n,o,r,i,s,u,c){var h=w();try{Mu(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Sy(e,t,n,o,r,i){var s=w();try{return Uu(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;return g(1,0),0n}}function Ay(e,t,n,o,r,i,s){var u=w();try{return Du(e,t,n,o,r,i,s)}catch(c){if(y(u),c!==c+0)throw c;g(1,0)}}function xy(e,t,n,o,r,i,s,u,c){var h=w();try{return Pu(e,t,n,o,r,i,s,u,c)}catch(m){if(y(h),m!==m+0)throw m;g(1,0)}}function Iy(e,t,n,o,r){var i=w();try{return _u(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;g(1,0)}}function Ly(e,t,n,o){var r=w();try{return da(e,t,n,o)}catch(i){if(y(r),i!==i+0)throw i;g(1,0)}}function Oy(e){var t=w();try{return Sa(e)}catch(n){if(y(t),n!==n+0)throw n;return g(1,0),0n}}function By(e,t,n,o,r,i){var s=w();try{return ku(e,t,n,o,r,i)}catch(u){if(y(s),u!==u+0)throw u;g(1,0)}}function My(e,t,n,o,r){var i=w();try{return Ru(e,t,n,o,r)}catch(s){if(y(i),s!==s+0)throw s;return g(1,0),0n}}return function e(){if(0<tt)Ee=e;else if(d)V?.(a),et();else{for(;0<Ne.length;)Ne.shift()(a);0<tt?Ee=e:(a.calledRun=!0,ce||(et(),V?.(a)))}}(),a.PTR_SIZE=4,a.webgpuInit=e=>{let t=new WeakMap,n,o,r=1;a.webgpuRegisterDevice=u=>{if(o!==void 0)throw Error("another WebGPU EP inference session is being created.");if(u){var c=t.get(u);if(!c){let h=((m,T=0)=>{var A=ko(T);return T=_o(T,A),ve(A,m.queue),ve(T,m),T})(u,c=Io(0));c=[r++,c,h],t.set(u,c)}return n=u,o=c[0],c}n=void 0,o=0};let i=new Map;a.webgpuOnCreateSession=u=>{if(o!==void 0){var c=o;if(o=void 0,u){let h=$r(c);i.set(u,h),c===0&&e(n??R(h))}n=void 0}},a.webgpuOnReleaseSession=u=>{i.delete(u)};let s=Symbol("gpuBufferMetadata");a.webgpuRegisterBuffer=(u,c,h)=>{if(h)return u[s]=[h,NaN],h;if(h=u[s])return h[1]++,h[0];if((c=i.get(c))===void 0)throw Error("Invalid session handle passed to webgpuRegisterBuffer");return c=((m,T=0)=>(m.mapState!="pending"||be(),T=Po(T,m.mapState=="mapped"?3:1),ve(T,m),m.mapState=="mapped"&&(ke[T]=[]),T))(u,c),u[s]=[c,1],c},a.webgpuUnregisterBuffer=u=>{let c=u[s];if(!c)throw Error("Buffer is not registered");c[1]--,c[1]===0&&(xo(c[0]),delete u[s])},a.webgpuGetBuffer=u=>R(u),a.webgpuCreateDownloader=(u,c,h)=>{if((h=i.get(h))===void 0)throw Error("Invalid session handle passed to webgpuRegisterBuffer");let m=R(h),T=16*Math.ceil(Number(c)/16);return async()=>{let A=m.createBuffer({size:T,usage:9});try{let x=m.createCommandEncoder();return x.copyBufferToBuffer(u,0,A,0,T),m.queue.submit([x.finish()]),await A.mapAsync(GPUMapMode.READ),A.getMappedRange().slice(0,c)}finally{A.destroy()}}},a.$j=(u,c)=>{var h=c.buffer;let m=c.byteOffset,T=c.byteLength;if(c=16*Math.ceil(Number(T)/16),u=R(u),!n){var A=$r(o);n=R(A)}let x=(A=n.createBuffer({mappedAtCreation:!0,size:c,usage:6})).getMappedRange();new Uint8Array(x).set(new Uint8Array(h,m,T)),A.unmap(),(h=n.createCommandEncoder()).copyBufferToBuffer(A,0,u,0,c),n.queue.submit([h.finish()]),A.destroy()}},a.webnnInit=e=>{let t=e[0];[a.ol,a.Pk,a.webnnEnsureTensor,a.Qk,a.webnnDownloadTensor,a.nl,a.webnnEnableTraceEvent]=e.slice(1),a.webnnReleaseTensorId=a.Pk,a.webnnUploadTensor=a.Qk,a.webnnRegisterMLContext=a.nl,a.webnnOnRunStart=n=>t.onRunStart(n),a.webnnOnRunEnd=t.onRunEnd.bind(t),a.webnnOnReleaseSession=n=>{t.onReleaseSession(n)},a.webnnCreateMLTensorDownloader=(n,o)=>t.createMLTensorDownloader(n,o),a.webnnRegisterMLTensor=(n,o,r,i)=>t.registerMLTensor(n,o,r,i),a.webnnCreateMLContext=n=>t.createMLContext(n),a.webnnRegisterMLConstant=(n,o,r,i,s,u)=>t.registerMLConstant(n,o,r,i,s,a.pg,u),a.webnnRegisterGraphInput=t.registerGraphInput.bind(t),a.webnnIsGraphInput=t.isGraphInput.bind(t),a.webnnRegisterGraphOutput=t.registerGraphOutput.bind(t),a.webnnIsGraphOutput=t.isGraphOutput.bind(t),a.webnnCreateTemporaryTensor=t.createTemporaryTensor.bind(t),a.webnnIsGraphInputOutputTypeSupported=t.isGraphInputOutputTypeSupported.bind(t)},Sr?a:new Promise((e,t)=>{V=e,K=t})}var Wy,Fy,Cf=q(()=>{"use strict";Wy=Bf,Fy=globalThis.self?.name?.startsWith("em-pthread");Fy&&Bf()});var Pf,cn,Gy,xe,_f,fn,$y,jy,kf,zy,Uf,Rf,Df,Nf,tr=q(()=>{"use strict";er();Pf=typeof location>"u"?void 0:location.origin,cn=import.meta.url>"file:"&&import.meta.url<"file;",Gy=()=>{if(!!1){if(cn){let f=URL;return new URL(new f("ort.webgpu.bundle.min.mjs",import.meta.url).href,Pf).href}return import.meta.url}},xe=Gy(),_f=()=>{if(xe&&!xe.startsWith("blob:"))return xe.substring(0,xe.lastIndexOf("/")+1)},fn=(f,a)=>{try{let l=a??xe;return(l?new URL(f,l):new URL(f)).origin===Pf}catch{return!1}},$y=(f,a)=>{let l=a??xe;try{return(l?new URL(f,l):new URL(f)).href}catch{return}},jy=(f,a)=>`${a??"./"}${f}`,kf=async f=>{let l=await(await fetch(f,{credentials:"same-origin"})).blob();return URL.createObjectURL(l)},zy=async f=>(await import(/*webpackIgnore:true*/f)).default,Uf=(Of(),Xt(Lf)).default,Rf=async()=>{if(!xe)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(fn(xe))return[void 0,Uf()];let f=await kf(xe);return[f,Uf(f)]},Df=(Cf(),Xt(Mf)).default,Nf=async(f,a,l,p)=>{let d=Df&&!(f||a);if(d)if(xe)d=fn(xe);else if(p&&!l)d=!0;else throw new Error("cannot determine the script source URL.");if(d)return[void 0,Df];{let v="ort-wasm-simd-threaded.asyncify.mjs",E=f??$y(v,a),S=!!1&&l&&E&&!fn(E,a),I=S?await kf(E):E??jy(v,a);return[S?I:void 0,await zy(I)]}}});var ln,dn,cr,Wf,Vy,Hy,qy,rr,X,Qe=q(()=>{"use strict";tr();dn=!1,cr=!1,Wf=!1,Vy=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},Hy=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},qy=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},rr=async f=>{if(dn)return Promise.resolve();if(cr)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Wf)throw new Error("previous call to 'initializeWebAssembly()' failed.");cr=!0;let a=f.initTimeout,l=f.numThreads;if(f.simd!==!1){if(f.simd==="relaxed"){if(!qy())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!Hy())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let p=Vy();l>1&&!p&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+l+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),f.numThreads=l=1);let d=f.wasmPaths,v=typeof d=="string"?d:void 0,E=d?.mjs,S=E?.href??E,I=d?.wasm,L=I?.href??I,B=f.wasmBinary,[C,M]=await Nf(S,v,l>1,!!B||!!L),_=!1,F=[];if(a>0&&F.push(new Promise(V=>{setTimeout(()=>{_=!0,V()},a)})),F.push(new Promise((V,K)=>{let G={numThreads:l};if(B)G.wasmBinary=B;else if(L||v)G.locateFile=W=>L??v+W;else if(S&&S.indexOf("blob:")!==0)G.locateFile=W=>new URL(W,S).href;else if(C){let W=_f();W&&(G.locateFile=re=>W+re)}M(G).then(W=>{cr=!1,dn=!0,ln=W,V(),C&&URL.revokeObjectURL(C)},W=>{cr=!1,Wf=!0,K(W)})})),await Promise.race(F),_)throw new Error(`WebAssembly backend initializing failed due to timeout: ${a}ms`)},X=()=>{if(dn&&ln)return ln;throw new Error("WebAssembly is not initialized yet.")}});var Te,Pt,Y,lr=q(()=>{"use strict";Qe();Te=(f,a)=>{let l=X(),p=l.lengthBytesUTF8(f)+1,d=l._malloc(p);return l.stringToUTF8(f,d,p),a.push(d),d},Pt=(f,a,l,p)=>{if(typeof f=="object"&&f!==null){if(l.has(f))throw new Error("Circular reference in options");l.add(f)}Object.entries(f).forEach(([d,v])=>{let E=a?a+d:d;if(typeof v=="object")Pt(v,E+".",l,p);else if(typeof v=="string"||typeof v=="number")p(E,v.toString());else if(typeof v=="boolean")p(E,v?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof v}`)})},Y=f=>{let a=X(),l=a.stackSave();try{let p=a.PTR_SIZE,d=a.stackAlloc(2*p);a._OrtGetLastError(d,d+p);let v=Number(a.getValue(d,p===4?"i32":"i64")),E=a.getValue(d+p,"*"),S=E?a.UTF8ToString(E):"";throw new Error(`${f} ERROR_CODE: ${v}, ERROR_MESSAGE: ${S}`)}finally{a.stackRestore(l)}}});var Ff,Gf=q(()=>{"use strict";Qe();lr();Ff=f=>{let a=X(),l=0,p=[],d=f||{};try{if(f?.logSeverityLevel===void 0)d.logSeverityLevel=2;else if(typeof f.logSeverityLevel!="number"||!Number.isInteger(f.logSeverityLevel)||f.logSeverityLevel<0||f.logSeverityLevel>4)throw new Error(`log severity level is not valid: ${f.logSeverityLevel}`);if(f?.logVerbosityLevel===void 0)d.logVerbosityLevel=0;else if(typeof f.logVerbosityLevel!="number"||!Number.isInteger(f.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${f.logVerbosityLevel}`);f?.terminate===void 0&&(d.terminate=!1);let v=0;return f?.tag!==void 0&&(v=Te(f.tag,p)),l=a._OrtCreateRunOptions(d.logSeverityLevel,d.logVerbosityLevel,!!d.terminate,v),l===0&&Y("Can't create run options."),f?.extra!==void 0&&Pt(f.extra,"",new WeakSet,(E,S)=>{let I=Te(E,p),L=Te(S,p);a._OrtAddRunConfigEntry(l,I,L)!==0&&Y(`Can't set a run config entry: ${E} - ${S}.`)}),[l,p]}catch(v){throw l!==0&&a._OrtReleaseRunOptions(l),p.forEach(E=>a._free(E)),v}}});var Yy,Jy,Xy,hn,pn,Zy,$f,jf=q(()=>{"use strict";Qe();lr();Yy=f=>{switch(f){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"layout":return 3;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${f}`)}},Jy=f=>{switch(f){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${f}`)}},Xy=f=>{f.extra||(f.extra={}),f.extra.session||(f.extra.session={});let a=f.extra.session;a.use_ort_model_bytes_directly||(a.use_ort_model_bytes_directly="1"),f.executionProviders&&f.executionProviders.some(l=>(typeof l=="string"?l:l.name)==="webgpu")&&(f.enableMemPattern=!1)},hn=(f,a,l,p)=>{let d=Te(a,p),v=Te(l,p);X()._OrtAddSessionConfigEntry(f,d,v)!==0&&Y(`Can't set a session config entry: ${a} - ${l}.`)},pn=(f,a,l,p)=>{let d=Te(a,p),v=Te(l,p);f.push([d,v])},Zy=async(f,a,l)=>{for(let p of a){let d=typeof p=="string"?p:p.name,v=[];switch(d){case"webnn":if(d="WEBNN",typeof p!="string"){let C=p?.deviceType;C&&hn(f,"deviceType",C,l)}break;case"webgpu":{d="WebGPU";let B;if(typeof p!="string"){let M=p;if(M.device)if(typeof GPUDevice<"u"&&M.device instanceof GPUDevice)B=M.device;else throw new Error("Invalid GPU device set in WebGPU EP options.")}let C=X().webgpuRegisterDevice(B);if(C){let[M,_,F]=C;pn(v,"deviceId",M.toString(),l),pn(v,"webgpuInstance",_.toString(),l),pn(v,"webgpuDevice",F.toString(),l)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${d}`)}let E=Te(d,l),S=v.length,I=0,L=0;if(S>0){I=X()._malloc(S*X().PTR_SIZE),l.push(I),L=X()._malloc(S*X().PTR_SIZE),l.push(L);for(let B=0;B<S;B++)X().setValue(I+B*X().PTR_SIZE,v[B][0],"*"),X().setValue(L+B*X().PTR_SIZE,v[B][1],"*")}await X()._OrtAppendExecutionProvider(f,E,I,L,S)!==0&&Y(`Can't append execution provider: ${d}.`)}},$f=async f=>{let a=X(),l=0,p=[],d=f||{};Xy(d);try{let v=Yy(d.graphOptimizationLevel??"all"),E=Jy(d.executionMode??"sequential"),S=typeof d.logId=="string"?Te(d.logId,p):0,I=d.logSeverityLevel??2;if(!Number.isInteger(I)||I<0||I>4)throw new Error(`log severity level is not valid: ${I}`);let L=d.logVerbosityLevel??0;if(!Number.isInteger(L)||L<0||L>4)throw new Error(`log verbosity level is not valid: ${L}`);let B=typeof d.optimizedModelFilePath=="string"?Te(d.optimizedModelFilePath,p):0;if(l=a._OrtCreateSessionOptions(v,!!d.enableCpuMemArena,!!d.enableMemPattern,E,!!d.enableProfiling,0,S,I,L,B),l===0&&Y("Can't create session options."),d.executionProviders&&await Zy(l,d.executionProviders,p),d.enableGraphCapture!==void 0){if(typeof d.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${d.enableGraphCapture}`);hn(l,"enableGraphCapture",d.enableGraphCapture.toString(),p)}if(d.freeDimensionOverrides)for(let[C,M]of Object.entries(d.freeDimensionOverrides)){if(typeof C!="string")throw new Error(`free dimension override name must be a string: ${C}`);if(typeof M!="number"||!Number.isInteger(M)||M<0)throw new Error(`free dimension override value must be a non-negative integer: ${M}`);let _=Te(C,p);a._OrtAddFreeDimensionOverride(l,_,M)!==0&&Y(`Can't set a free dimension override: ${C} - ${M}.`)}return d.extra!==void 0&&Pt(d.extra,"",new WeakSet,(C,M)=>{hn(l,C,M,p)}),[l,p]}catch(v){throw l!==0&&a._OrtReleaseSessionOptions(l)!==0&&Y("Can't release session options."),p.forEach(E=>a._free(E)),v}}});var Ke,dr,Et,lt,_t,pr,hr,mn,dt=q(()=>{"use strict";Ke=f=>{switch(f){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${f}`)}},dr=f=>{switch(f){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${f}`)}},Et=(f,a)=>{let l=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][f],p=typeof a=="number"?a:a.reduce((d,v)=>d*v,1);return l>0?Math.ceil(p*l):void 0},lt=f=>{switch(f){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${f}`)}},_t=f=>{switch(f){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${f}`)}},pr=f=>f==="float32"||f==="float16"||f==="int32"||f==="int64"||f==="uint32"||f==="uint8"||f==="bool"||f==="uint4"||f==="int4",hr=f=>f==="float32"||f==="float16"||f==="int32"||f==="int64"||f==="uint32"||f==="uint64"||f==="int8"||f==="uint8"||f==="bool"||f==="uint4"||f==="int4",mn=f=>{switch(f){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${f}`)}}});var kt,yn=q(()=>{"use strict";er();kt=async f=>{if(typeof f=="string")if(!1)try{let{readFile:a}=en("node:fs/promises");return new Uint8Array(await a(f))}catch(a){if(a.code==="ERR_FS_FILE_TOO_LARGE"){let{createReadStream:l}=en("node:fs"),p=l(f),d=[];for await(let v of p)d.push(v);return new Uint8Array(Buffer.concat(d))}throw a}else{let a=await fetch(f);if(!a.ok)throw new Error(`failed to load external data file: ${f}`);let l=a.headers.get("Content-Length"),p=l?parseInt(l,10):0;if(p<1073741824)return new Uint8Array(await a.arrayBuffer());{if(!a.body)throw new Error(`failed to load external data file: ${f}, no response body.`);let d=a.body.getReader(),v;try{v=new ArrayBuffer(p)}catch(S){if(S instanceof RangeError){let I=Math.ceil(p/65536);v=new WebAssembly.Memory({initial:I,maximum:I}).buffer}else throw S}let E=0;for(;;){let{done:S,value:I}=await d.read();if(S)break;let L=I.byteLength;new Uint8Array(v,E,L).set(I),E+=L}return new Uint8Array(v,0,p)}}else return f instanceof Blob?new Uint8Array(await f.arrayBuffer()):f instanceof Uint8Array?f:new Uint8Array(f)}});var zf,Vf=q(()=>{"use strict";dt();zf=(f,a)=>new(lt(a))(f)});var Qy,Ky,Hf,qf,Yf,e0,ge,wn=q(()=>{"use strict";dt();Qy=["V","I","W","E","F"],Ky=(f,a)=>{console.log(`[${Qy[f]},${new Date().toISOString()}]${a}`)},Yf=(f,a)=>{Hf=f,qf=a},e0=(f,a)=>{let l=_t(f),p=_t(Hf);l>=p&&Ky(l,typeof a=="function"?a():a)},ge=(...f)=>{qf&&e0(...f)}});var Xf,bn,Zf,t0,Jf,r0,Qf,mr,yr,gn,Kf,ec=q(()=>{"use strict";dt();wn();Xf=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),bn=(f,a)=>{if(a==="int32")return f;let l=Xf.get(a);if(!l)throw new Error(`WebNN backend does not support data type: ${a}`);let p=l/8;if(f.byteLength%p!==0)throw new Error(`Invalid Uint8Array length - must be a multiple of ${p}.`);let d=f.byteLength/p,v=new(lt(a))(f.buffer,f.byteOffset,d);switch(a){case"int64":case"uint64":{let E=new Int32Array(d);for(let S=0;S<d;S++){let I=v[S];if(I>2147483647n||I<-2147483648n)throw new Error("Can not convert int64 data to int32 - value out of range.");E[S]=Number(I)}return new Uint8Array(E.buffer)}case"int8":case"uint8":case"uint32":{if(a==="uint32"&&v.some(S=>S>2147483647))throw new Error("Can not convert uint32 data to int32 - value out of range.");let E=Int32Array.from(v,Number);return new Uint8Array(E.buffer)}default:throw new Error(`Unsupported data conversion from ${a} to 'int32'`)}},Zf=(f,a)=>{if(a==="int32")return f;if(f.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (int32).");let l=f.byteLength/4,p=new Int32Array(f.buffer,f.byteOffset,l);switch(a){case"int64":{let d=BigInt64Array.from(p,BigInt);return new Uint8Array(d.buffer)}case"uint64":{if(p.some(v=>v<0))throw new Error("Can not convert int32 data to uin64 - negative value found.");let d=BigUint64Array.from(p,BigInt);return new Uint8Array(d.buffer)}case"int8":{if(p.some(v=>v<-128||v>127))throw new Error("Can not convert int32 data to int8 - value out of range.");let d=Int8Array.from(p,Number);return new Uint8Array(d.buffer)}case"uint8":{if(p.some(d=>d<0||d>255))throw new Error("Can not convert int32 data to uint8 - value out of range.");return Uint8Array.from(p,Number)}case"uint32":{if(p.some(v=>v<0))throw new Error("Can not convert int32 data to uint32 - negative value found.");let d=Uint32Array.from(p,Number);return new Uint8Array(d.buffer)}default:throw new Error(`Unsupported data conversion from 'int32' to ${a}`)}},t0=1,Jf=()=>t0++,r0=new Map([["int8","int32"],["uint8","int32"],["uint32","int32"],["int64","int32"]]),Qf=(f,a)=>{let l=Xf.get(f);if(!l)throw new Error(`WebNN backend does not support data type: ${f}`);return a.length>0?Math.ceil(a.reduce((p,d)=>p*d)*l/8):0},mr=class{constructor(a){this.isDataConverted=!1;let{sessionId:l,context:p,tensor:d,dataType:v,shape:E,fallbackDataType:S}=a;this.sessionId=l,this.mlContext=p,this.mlTensor=d,this.dataType=v,this.tensorShape=E,this.fallbackDataType=S}get tensor(){return this.mlTensor}get type(){return this.dataType}get fallbackType(){return this.fallbackDataType}get shape(){return this.tensorShape}get byteLength(){return Qf(this.dataType,this.tensorShape)}destroy(){ge("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(a){this.mlContext.writeTensor(this.mlTensor,a)}async read(a){if(this.fallbackDataType){let l=await this.mlContext.readTensor(this.mlTensor),p=Zf(new Uint8Array(l),this.dataType);if(a){(a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)).set(p);return}else return p.buffer}else return a?this.mlContext.readTensor(this.mlTensor,a):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(a,l,p){return this.mlContext===a&&this.dataType===l&&this.tensorShape.length===p.length&&this.tensorShape.every((d,v)=>d===p[v])}setIsDataConverted(a){this.isDataConverted=a}},yr=class{constructor(a,l){this.tensorManager=a;this.wrapper=l}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(a,l,p,d){let v=this.tensorManager.getMLContext(a),E=this.tensorManager.getMLOpSupportLimits(a),S;if(!E?.input.dataTypes.includes(l)){if(S=r0.get(l),!S||E?.input.dataTypes.includes(S))throw new Error(`WebNN backend does not support data type: ${l}`);ge("verbose",()=>`[WebNN] TensorIdTracker.ensureTensor: fallback dataType from ${l} to ${S}`)}if(this.wrapper){if(this.wrapper.canReuseTensor(v,l,p))return this.wrapper.tensor;if(d){if(this.wrapper.byteLength!==Qf(l,p))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let I=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(a,l,p,I,!0,!0,S),d&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(a){let l=a;if(this.wrapper){if(this.wrapper.fallbackType)if(this.wrapper.fallbackType==="int32")l=bn(a,this.wrapper.type),this.wrapper.setIsDataConverted(!0);else throw new Error(`Unsupported fallback data type: ${this.wrapper.fallbackType}`);if(a.byteLength===this.wrapper.byteLength){this.wrapper.write(l);return}else ge("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor()}this.activeUpload?this.activeUpload.set(l):this.activeUpload=new Uint8Array(l)}async download(a){if(this.activeUpload){let l=this.wrapper?.isDataConverted?Zf(this.activeUpload,this.wrapper?.type):this.activeUpload;if(a){a instanceof ArrayBuffer?new Uint8Array(a).set(l):new Uint8Array(a.buffer,a.byteOffset,a.byteLength).set(l);return}else return l.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return a?this.wrapper.read(a):this.wrapper.read()}},gn=class{constructor(a){this.backend=a;this.tensorTrackersById=new Map;this.freeTensors=[];this.externalTensors=new Set}getMLContext(a){let l=this.backend.getMLContext(a);if(!l)throw new Error("MLContext not found for session.");return l}getMLOpSupportLimits(a){return this.backend.getMLOpSupportLimits(a)}reserveTensorId(){let a=Jf();return this.tensorTrackersById.set(a,new yr(this)),a}releaseTensorId(a){let l=this.tensorTrackersById.get(a);l&&(this.tensorTrackersById.delete(a),l.tensorWrapper&&this.releaseTensor(l.tensorWrapper))}async ensureTensor(a,l,p,d,v){ge("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${l}, dataType: ${p}, shape: ${d}, copyOld: ${v}}`);let E=this.tensorTrackersById.get(l);if(!E)throw new Error("Tensor not found.");return E.ensureTensor(a,p,d,v)}upload(a,l){let p=this.tensorTrackersById.get(a);if(!p)throw new Error("Tensor not found.");p.upload(l)}async download(a,l){ge("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${a}, dstBuffer: ${l?.byteLength}}`);let p=this.tensorTrackersById.get(a);if(!p)throw new Error("Tensor not found.");return p.download(l)}releaseTensorsForSession(a){for(let l of this.freeTensors)l.sessionId===a&&l.destroy();this.freeTensors=this.freeTensors.filter(l=>l.sessionId!==a)}registerTensor(a,l,p,d){let v=this.getMLContext(a),E=Jf(),S=new mr({sessionId:a,context:v,tensor:l,dataType:p,shape:d});return this.tensorTrackersById.set(E,new yr(this,S)),this.externalTensors.add(S),E}async getCachedTensor(a,l,p,d,v,E,S){let I=this.getMLContext(a);for(let[B,C]of this.freeTensors.entries())if(C.canReuseTensor(I,l,p)){ge("verbose",()=>`[WebNN] Reusing tensor {dataType: ${l}, ${S?`fallbackDataType: ${S},`:""} shape: ${p}`);let M=this.freeTensors.splice(B,1)[0];return M.sessionId=a,M}ge("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${l}, ${S?`fallbackDataType: ${S},`:""} shape: ${p}}`);let L=await I.createTensor({dataType:S??l,shape:p,dimensions:p,usage:d,writable:v,readable:E});return new mr({sessionId:a,context:I,tensor:L,dataType:l,shape:p,fallbackDataType:S})}releaseTensor(a){this.externalTensors.has(a)&&this.externalTensors.delete(a),this.freeTensors.push(a)}},Kf=(...f)=>new gn(...f)});var tc={};Ct(tc,{WebNNBackend:()=>vn});var wr,n0,vn,rc=q(()=>{"use strict";dt();Qe();Vf();ec();wn();wr=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),n0=(f,a)=>{if(f===a)return!0;if(f===void 0||a===void 0)return!1;let l=Object.keys(f).sort(),p=Object.keys(a).sort();return l.length===p.length&&l.every((d,v)=>d===p[v]&&f[d]===a[d])},vn=class{constructor(a){this.tensorManager=Kf(this);this.mlContextBySessionId=new Map;this.sessionIdsByMLContext=new Map;this.mlContextCache=[];this.sessionGraphInputs=new Map;this.sessionGraphOutputs=new Map;this.temporaryGraphInputs=[];this.temporaryGraphOutputs=[];this.temporarySessionTensorIds=new Map;this.mlOpSupportLimitsBySessionId=new Map;Yf(a.logLevel,!!a.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(a){ge("verbose",()=>`[WebNN] onRunStart {sessionId: ${a}}`),this.activeSessionId=a}onRunEnd(a){ge("verbose",()=>`[WebNN] onRunEnd {sessionId: ${a}}`);let l=this.temporarySessionTensorIds.get(a);if(l){for(let p of l)ge("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${p}}`),this.tensorManager.releaseTensorId(p);this.temporarySessionTensorIds.delete(a),this.activeSessionId=void 0}}async createMLContext(a){if(a instanceof GPUDevice){let p=this.mlContextCache.findIndex(d=>d.gpuDevice===a);if(p!==-1)return this.mlContextCache[p].mlContext;{let d=await navigator.ml.createContext(a);return this.mlContextCache.push({gpuDevice:a,mlContext:d}),d}}else if(a===void 0){let p=this.mlContextCache.findIndex(d=>d.options===void 0&&d.gpuDevice===void 0);if(p!==-1)return this.mlContextCache[p].mlContext;{let d=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:d}),d}}let l=this.mlContextCache.findIndex(p=>n0(p.options,a));if(l!==-1)return this.mlContextCache[l].mlContext;{let p=await navigator.ml.createContext(a);return this.mlContextCache.push({options:a,mlContext:p}),p}}registerMLContext(a,l){this.mlContextBySessionId.set(a,l);let p=this.sessionIdsByMLContext.get(l);p||(p=new Set,this.sessionIdsByMLContext.set(l,p)),p.add(a),this.mlOpSupportLimitsBySessionId.has(a)||this.mlOpSupportLimitsBySessionId.set(a,l.opSupportLimits()),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(a,this.temporaryGraphInputs),this.temporaryGraphInputs=[]),this.temporaryGraphOutputs.length>0&&(this.sessionGraphOutputs.set(a,this.temporaryGraphOutputs),this.temporaryGraphOutputs=[])}onReleaseSession(a){this.sessionGraphInputs.delete(a),this.sessionGraphOutputs.delete(a);let l=this.mlContextBySessionId.get(a);if(!l)return;this.tensorManager.releaseTensorsForSession(a),this.mlContextBySessionId.delete(a),this.mlOpSupportLimitsBySessionId.delete(a);let p=this.sessionIdsByMLContext.get(l);if(p.delete(a),p.size===0){this.sessionIdsByMLContext.delete(l);let d=this.mlContextCache.findIndex(v=>v.mlContext===l);d!==-1&&this.mlContextCache.splice(d,1)}}getMLContext(a){return this.mlContextBySessionId.get(a)}getMLOpSupportLimits(a){return this.mlOpSupportLimitsBySessionId.get(a)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(a){ge("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${a}}`),this.tensorManager.releaseTensorId(a)}async ensureTensor(a,l,p,d,v){let E=wr.get(p);if(!E)throw new Error(`Unsupported ONNX data type: ${p}`);return this.tensorManager.ensureTensor(a??this.currentSessionId,l,E,d,v)}async createTemporaryTensor(a,l,p){ge("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${l}, shape: ${p}}`);let d=wr.get(l);if(!d)throw new Error(`Unsupported ONNX data type: ${l}`);let v=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(a,v,d,p,!1);let E=this.temporarySessionTensorIds.get(a);return E?E.push(v):this.temporarySessionTensorIds.set(a,[v]),v}uploadTensor(a,l){if(!X().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");ge("verbose",()=>`[WebNN] uploadTensor {tensorId: ${a}, data: ${l.byteLength}}`),this.tensorManager.upload(a,l)}async downloadTensor(a,l){return this.tensorManager.download(a,l)}createMLTensorDownloader(a,l){return async()=>{let p=await this.tensorManager.download(a);return zf(p,l)}}registerMLTensor(a,l,p,d){let v=wr.get(p);if(!v)throw new Error(`Unsupported ONNX data type: ${p}`);let E=this.tensorManager.registerTensor(a,l,v,d);return ge("verbose",()=>`[WebNN] registerMLTensor {tensor: ${l}, dataType: ${v}, dimensions: ${d}} -> {tensorId: ${E}}`),E}registerMLConstant(a,l,p,d,v,E,S=!1){if(!E)throw new Error("External mounted files are not available.");let I=a;a.startsWith("./")&&(I=a.substring(2));let L=E.get(I);if(!L)throw new Error(`File with name ${I} not found in preloaded files.`);if(l+p>L.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let B=L.slice(l,l+p).buffer,C;switch(v.dataType){case"float32":C=new Float32Array(B);break;case"float16":C=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(B):new Uint16Array(B);break;case"int32":C=new Int32Array(B);break;case"uint32":C=new Uint32Array(B);break;case"int64":if(S){let M=bn(new Uint8Array(B),"int64");C=new Int32Array(M.buffer),v.dataType="int32"}else C=new BigInt64Array(B);break;case"uint64":C=new BigUint64Array(B);break;case"int8":C=new Int8Array(B);break;case"int4":case"uint4":case"uint8":C=new Uint8Array(B);break;default:throw new Error(`Unsupported data type: ${v.dataType} in creating WebNN Constant from external data.`)}return ge("verbose",()=>`[WebNN] registerMLConstant {dataType: ${v.dataType}, shape: ${v.shape}}} ${S?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),d.constant(v,C)}registerGraphInput(a){this.temporaryGraphInputs.push(a)}registerGraphOutput(a){this.temporaryGraphOutputs.push(a)}isGraphInput(a,l){let p=this.sessionGraphInputs.get(a);return p?p.includes(l):!1}isGraphOutput(a,l){let p=this.sessionGraphOutputs.get(a);return p?p.includes(l):!1}isGraphInputOutputTypeSupported(a,l,p=!0){let d=wr.get(Ke(l)),v=this.mlOpSupportLimitsBySessionId.get(a);return typeof d>"u"?!1:p?!!v?.input.dataTypes.includes(d):!!v?.output.dataTypes.includes(d)}flush(){}}});var o0,nr,or,pt,a0,nc,Dt,ar,ir,oc,sr,ur,fr,un=q(()=>{"use strict";Ze();Gf();jf();dt();Qe();lr();yn();o0=(f,a)=>{X()._OrtInit(f,a)!==0&&Y("Can't initialize onnxruntime.")},nr=async f=>{o0(f.wasm.numThreads,_t(f.logLevel))},or=async(f,a)=>{X().asyncInit?.();let l=f.webgpu.adapter;if(a==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");if(l){if(typeof l.limits!="object"||typeof l.features!="object"||typeof l.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let p=f.webgpu.powerPreference;if(p!==void 0&&p!=="low-power"&&p!=="high-performance")throw new Error(`Invalid powerPreference setting: "${p}"`);let d=f.webgpu.forceFallbackAdapter;if(d!==void 0&&typeof d!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${d}"`);if(l=await navigator.gpu.requestAdapter({powerPreference:p,forceFallbackAdapter:d}),!l)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}}if(a==="webnn"&&(typeof navigator>"u"||!navigator.ml))throw new Error("WebNN is not supported in current environment");if(a==="webgpu"&&X().webgpuInit(p=>{f.webgpu.device=p}),a==="webnn"){let p=new(rc(),Xt(tc)).WebNNBackend(f);X().webnnInit([p,()=>p.reserveTensorId(),d=>p.releaseTensorId(d),async(d,v,E,S,I)=>p.ensureTensor(d,v,E,S,I),(d,v)=>{p.uploadTensor(d,v)},async(d,v)=>p.downloadTensor(d,v),(d,v)=>p.registerMLContext(d,v),!!f.trace])}},pt=new Map,a0=f=>{let a=X(),l=a.stackSave();try{let p=a.PTR_SIZE,d=a.stackAlloc(2*p);a._OrtGetInputOutputCount(f,d,d+p)!==0&&Y("Can't get session input/output count.");let E=p===4?"i32":"i64";return[Number(a.getValue(d,E)),Number(a.getValue(d+p,E))]}finally{a.stackRestore(l)}},nc=(f,a)=>{let l=X(),p=l.stackSave(),d=0;try{let v=l.PTR_SIZE,E=l.stackAlloc(2*v);l._OrtGetInputOutputMetadata(f,a,E,E+v)!==0&&Y("Can't get session input/output metadata.");let I=Number(l.getValue(E,"*"));d=Number(l.getValue(E+v,"*"));let L=l.HEAP32[d/4];if(L===0)return[I,0];let B=l.HEAPU32[d/4+1],C=[];for(let M=0;M<B;M++){let _=Number(l.getValue(d+8+M*v,"*"));C.push(_!==0?l.UTF8ToString(_):Number(l.getValue(d+8+(M+B)*v,"*")))}return[I,L,C]}finally{l.stackRestore(p),d!==0&&l._OrtFree(d)}},Dt=f=>{let a=X(),l=a._malloc(f.byteLength);if(l===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${f.byteLength}.`);return a.HEAPU8.set(f,l),[l,f.byteLength]},ar=async(f,a)=>{let l,p,d=X();Array.isArray(f)?[l,p]=f:f.buffer===d.HEAPU8.buffer?[l,p]=[f.byteOffset,f.byteLength]:[l,p]=Dt(f);let v=0,E=0,S=0,I=[],L=[],B=[];try{if([E,I]=await $f(a),a?.externalData&&d.mountExternalData){let z=[];for(let Q of a.externalData){let Z=typeof Q=="string"?Q:Q.path;z.push(kt(typeof Q=="string"?Q:Q.data).then(ce=>{d.mountExternalData(Z,ce)}))}await Promise.all(z)}for(let z of a?.executionProviders??[])if((typeof z=="string"?z:z.name)==="webnn"){if(d.shouldTransferToMLTensor=!1,typeof z!="string"){let Z=z,ce=Z?.context,le=Z?.gpuDevice,b=Z?.deviceType,Ae=Z?.powerPreference;ce?d.currentContext=ce:le?d.currentContext=await d.webnnCreateMLContext(le):d.currentContext=await d.webnnCreateMLContext({deviceType:b,powerPreference:Ae})}else d.currentContext=await d.webnnCreateMLContext();break}v=await d._OrtCreateSession(l,p,E),d.webgpuOnCreateSession?.(v),v===0&&Y("Can't create a session."),d.jsepOnCreateSession?.(),d.currentContext&&(d.webnnRegisterMLContext(v,d.currentContext),d.currentContext=void 0,d.shouldTransferToMLTensor=!0);let[C,M]=a0(v),_=!!a?.enableGraphCapture,F=[],V=[],K=[],G=[],W=[];for(let z=0;z<C;z++){let[Q,Z,ce]=nc(v,z);Q===0&&Y("Can't get an input name."),L.push(Q);let le=d.UTF8ToString(Q);F.push(le),K.push(Z===0?{name:le,isTensor:!1}:{name:le,isTensor:!0,type:dr(Z),shape:ce})}for(let z=0;z<M;z++){let[Q,Z,ce]=nc(v,z+C);Q===0&&Y("Can't get an output name."),B.push(Q);let le=d.UTF8ToString(Q);V.push(le),G.push(Z===0?{name:le,isTensor:!1}:{name:le,isTensor:!0,type:dr(Z),shape:ce});{if(_&&a?.preferredOutputLocation===void 0){W.push("gpu-buffer");continue}let b=typeof a?.preferredOutputLocation=="string"?a.preferredOutputLocation:a?.preferredOutputLocation?.[le]??"cpu",Ae=d.webnnIsGraphOutput;if(b==="cpu"&&Ae&&Ae(v,le)){W.push("ml-tensor-cpu-output");continue}if(b!=="cpu"&&b!=="cpu-pinned"&&b!=="gpu-buffer"&&b!=="ml-tensor")throw new Error(`Not supported preferred output location: ${b}.`);if(_&&b!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${b}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);W.push(b)}}let re=null;return W.some(z=>z==="gpu-buffer"||z==="ml-tensor"||z==="ml-tensor-cpu-output")&&(S=d._OrtCreateBinding(v),S===0&&Y("Can't create IO binding."),re={handle:S,outputPreferredLocations:W,outputPreferredLocationsEncoded:W.map(z=>z==="ml-tensor-cpu-output"?"ml-tensor":z).map(z=>mn(z))}),pt.set(v,[v,L,B,re,_,!1]),[v,F,V,K,G]}catch(C){throw L.forEach(M=>d._OrtFree(M)),B.forEach(M=>d._OrtFree(M)),S!==0&&d._OrtReleaseBinding(S)!==0&&Y("Can't release IO binding."),v!==0&&d._OrtReleaseSession(v)!==0&&Y("Can't release session."),C}finally{d._free(l),E!==0&&d._OrtReleaseSessionOptions(E)!==0&&Y("Can't release session options."),I.forEach(C=>d._free(C)),d.unmountExternalData?.()}},ir=f=>{let a=X(),l=pt.get(f);if(!l)throw new Error(`cannot release session. invalid session id: ${f}`);let[p,d,v,E,S]=l;E&&(S&&a._OrtClearBoundOutputs(E.handle)!==0&&Y("Can't clear bound outputs."),a._OrtReleaseBinding(E.handle)!==0&&Y("Can't release IO binding.")),a.jsepOnReleaseSession?.(f),a.webnnOnReleaseSession?.(f),a.webgpuOnReleaseSession?.(f),d.forEach(I=>a._OrtFree(I)),v.forEach(I=>a._OrtFree(I)),a._OrtReleaseSession(p)!==0&&Y("Can't release session."),pt.delete(f)},oc=async(f,a,l,p,d,v,E=!1)=>{if(!f){a.push(0);return}let S=X(),I=S.PTR_SIZE,L=f[0],B=f[1],C=f[3],M=C,_,F;if(L==="string"&&(C==="gpu-buffer"||C==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(E&&C!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${v} when enableGraphCapture is true.`);if(C==="gpu-buffer"){let G=f[2].gpuBuffer;F=Et(Ke(L),B);{let W=S.webgpuRegisterBuffer;if(!W)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');_=W(G,p)}}else if(C==="ml-tensor"){let G=f[2].mlTensor;F=Et(Ke(L),B);let W=S.webnnRegisterMLTensor;if(!W)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');_=W(p,G,Ke(L),B)}else{let G=f[2];if(Array.isArray(G)){F=I*G.length,_=S._malloc(F),l.push(_);for(let W=0;W<G.length;W++){if(typeof G[W]!="string")throw new TypeError(`tensor data at index ${W} is not a string`);S.setValue(_+W*I,Te(G[W],l),"*")}}else{let W=S.webnnIsGraphInput,re=S.webnnIsGraphOutput;if(L!=="string"&&W&&re){let z=S.UTF8ToString(d);if(W(p,z)||re(p,z)){let Q=Ke(L);F=Et(Q,B),M="ml-tensor";let Z=S.webnnCreateTemporaryTensor,ce=S.webnnUploadTensor;if(!Z||!ce)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let le=await Z(p,Q,B);ce(le,new Uint8Array(G.buffer,G.byteOffset,G.byteLength)),_=le}else F=G.byteLength,_=S._malloc(F),l.push(_),S.HEAPU8.set(new Uint8Array(G.buffer,G.byteOffset,F),_)}else F=G.byteLength,_=S._malloc(F),l.push(_),S.HEAPU8.set(new Uint8Array(G.buffer,G.byteOffset,F),_)}}let V=S.stackSave(),K=S.stackAlloc(4*B.length);try{B.forEach((W,re)=>S.setValue(K+re*I,W,I===4?"i32":"i64"));let G=S._OrtCreateTensor(Ke(L),_,F,K,B.length,mn(M));G===0&&Y(`Can't create tensor for input/output. session=${p}, index=${v}.`),a.push(G)}finally{S.stackRestore(V)}},sr=async(f,a,l,p,d,v)=>{let E=X(),S=E.PTR_SIZE,I=pt.get(f);if(!I)throw new Error(`cannot run inference. invalid session id: ${f}`);let L=I[0],B=I[1],C=I[2],M=I[3],_=I[4],F=I[5],V=a.length,K=p.length,G=0,W=[],re=[],z=[],Q=[],Z=[],ce=E.stackSave(),le=E.stackAlloc(V*S),b=E.stackAlloc(V*S),Ae=E.stackAlloc(K*S),Be=E.stackAlloc(K*S);try{[G,W]=Ff(v),Je("wasm prepareInputOutputTensor");for(let $=0;$<V;$++)await oc(l[$],re,Q,f,B[a[$]],a[$],_);for(let $=0;$<K;$++)await oc(d[$],z,Q,f,C[p[$]],V+p[$],_);Xe("wasm prepareInputOutputTensor");for(let $=0;$<V;$++)E.setValue(le+$*S,re[$],"*"),E.setValue(b+$*S,B[a[$]],"*");for(let $=0;$<K;$++)E.setValue(Ae+$*S,z[$],"*"),E.setValue(Be+$*S,C[p[$]],"*");if(M&&!F){let{handle:$,outputPreferredLocations:k,outputPreferredLocationsEncoded:P}=M;if(B.length!==V)throw new Error(`input count from feeds (${V}) is expected to be always equal to model's input count (${B.length}).`);Je("wasm bindInputsOutputs");for(let te=0;te<V;te++){let pe=a[te];await E._OrtBindInput($,B[pe],re[te])!==0&&Y(`Can't bind input[${te}] for session=${f}.`)}for(let te=0;te<K;te++){let pe=p[te];d[te]?.[3]?(Z.push(z[te]),E._OrtBindOutput($,C[pe],z[te],0)!==0&&Y(`Can't bind pre-allocated output[${te}] for session=${f}.`)):E._OrtBindOutput($,C[pe],0,P[pe])!==0&&Y(`Can't bind output[${te}] to ${k[te]} for session=${f}.`)}Xe("wasm bindInputsOutputs"),pt.set(f,[L,B,C,M,_,!0])}E.jsepOnRunStart?.(L),E.webnnOnRunStart?.(L);let ee;M?ee=await E._OrtRunWithBinding(L,M.handle,K,Ae,G):ee=await E._OrtRun(L,b,le,V,Be,K,Ae,G),ee!==0&&Y("failed to call OrtRun().");let ne=[],Re=[];Je("wasm ProcessOutputTensor");for(let $=0;$<K;$++){let k=Number(E.getValue(Ae+$*S,"*"));if(k===z[$]||Z.includes(z[$])){ne.push(d[$]),k!==z[$]&&E._OrtReleaseTensor(k)!==0&&Y("Can't release tensor.");continue}let P=E.stackSave(),te=E.stackAlloc(4*S),pe=!1,J,he=0;try{E._OrtGetTensorData(k,te,te+S,te+2*S,te+3*S)!==0&&Y(`Can't access output tensor data on index ${$}.`);let Ve=S===4?"i32":"i64",et=Number(E.getValue(te,Ve));he=E.getValue(te+S,"*");let mt=E.getValue(te+S*2,"*"),tt=Number(E.getValue(te+S*3,Ve)),Ee=[];for(let de=0;de<tt;de++)Ee.push(Number(E.getValue(mt+de*S,Ve)));E._OrtFree(mt)!==0&&Y("Can't free memory for tensor dims.");let Me=Ee.reduce((de,oe)=>de*oe,1);J=dr(et);let be=M?.outputPreferredLocations[p[$]];if(J==="string"){if(be==="gpu-buffer"||be==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let de=[];for(let oe=0;oe<Me;oe++){let Ce=E.getValue(he+oe*S,"*"),Ne=E.getValue(he+(oe+1)*S,"*"),yt=oe===Me-1?void 0:Ne-Ce;de.push(E.UTF8ToString(Ce,yt))}ne.push([J,Ee,de,"cpu"])}else if(be==="gpu-buffer"&&Me>0){let de=E.webgpuGetBuffer;if(!de)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let oe=de(he),Ce=Et(et,Me);if(Ce===void 0||!pr(J))throw new Error(`Unsupported data type: ${J}`);pe=!0;{E.webgpuRegisterBuffer(oe,f,he);let Ne=E.webgpuCreateDownloader(oe,Ce,f);ne.push([J,Ee,{gpuBuffer:oe,download:async()=>{let yt=await Ne();return new(lt(J))(yt)},dispose:()=>{E._OrtReleaseTensor(k)!==0&&Y("Can't release tensor.")}},"gpu-buffer"])}}else if(be==="ml-tensor"&&Me>0){let de=E.webnnEnsureTensor,oe=E.webnnIsGraphInputOutputTypeSupported;if(!de||!oe)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(Et(et,Me)===void 0||!hr(J))throw new Error(`Unsupported data type: ${J}`);if(!oe(f,J,!1))throw new Error(`preferredLocation "ml-tensor" for ${J} output is not supported by current WebNN Context.`);let Ne=await de(f,he,et,Ee,!1);pe=!0,ne.push([J,Ee,{mlTensor:Ne,download:E.webnnCreateMLTensorDownloader(he,J),dispose:()=>{E.webnnReleaseTensorId(he),E._OrtReleaseTensor(k)}},"ml-tensor"])}else if(be==="ml-tensor-cpu-output"&&Me>0){let de=E.webnnCreateMLTensorDownloader(he,J)(),oe=ne.length;pe=!0,Re.push((async()=>{let Ce=[oe,await de];return E.webnnReleaseTensorId(he),E._OrtReleaseTensor(k),Ce})()),ne.push([J,Ee,[],"cpu"])}else{let de=lt(J),oe=new de(Me);new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength).set(E.HEAPU8.subarray(he,he+oe.byteLength)),ne.push([J,Ee,oe,"cpu"])}}finally{E.stackRestore(P),J==="string"&&he&&E._free(he),pe||E._OrtReleaseTensor(k)}}M&&!_&&(E._OrtClearBoundOutputs(M.handle)!==0&&Y("Can't clear bound outputs."),pt.set(f,[L,B,C,M,_,!1]));for(let[$,k]of await Promise.all(Re))ne[$][2]=k;return Xe("wasm ProcessOutputTensor"),ne}finally{E.webnnOnRunEnd?.(L),E.stackRestore(ce),l.forEach(ee=>{ee&&ee[3]==="gpu-buffer"&&E.webgpuUnregisterBuffer(ee[2].gpuBuffer)}),d.forEach(ee=>{ee&&ee[3]==="gpu-buffer"&&E.webgpuUnregisterBuffer(ee[2].gpuBuffer)}),re.forEach(ee=>E._OrtReleaseTensor(ee)),z.forEach(ee=>E._OrtReleaseTensor(ee)),Q.forEach(ee=>E._free(ee)),G!==0&&E._OrtReleaseRunOptions(G),W.forEach(ee=>E._free(ee))}},ur=f=>{let a=X(),l=pt.get(f);if(!l)throw new Error("invalid session id");let p=l[0],d=a._OrtEndProfiling(p);d===0&&Y("Can't get an profile file name."),a._OrtFree(d)},fr=f=>{let a=[];for(let l of f){let p=l[2];!Array.isArray(p)&&"buffer"in p&&a.push(p.buffer)}return a}});var ht,Oe,Rt,br,vr,gr,Tn,En,St,At,s0,ac,ic,sc,uc,fc,cc,lc,Sn=q(()=>{"use strict";Ze();un();Qe();tr();ht=()=>!!se.wasm.proxy&&typeof document<"u",Rt=!1,br=!1,vr=!1,En=new Map,St=(f,a)=>{let l=En.get(f);l?l.push(a):En.set(f,[a])},At=()=>{if(Rt||!br||vr||!Oe)throw new Error("worker not ready")},s0=f=>{switch(f.data.type){case"init-wasm":Rt=!1,f.data.err?(vr=!0,Tn[1](f.data.err)):(br=!0,Tn[0]()),gr&&(URL.revokeObjectURL(gr),gr=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let a=En.get(f.data.type);f.data.err?a.shift()[1](f.data.err):a.shift()[0](f.data.out);break}default:}},ac=async()=>{if(!br){if(Rt)throw new Error("multiple calls to 'initWasm()' detected.");if(vr)throw new Error("previous call to 'initWasm()' failed.");if(Rt=!0,ht())return new Promise((f,a)=>{Oe?.terminate(),Rf().then(([l,p])=>{try{Oe=p,Oe.onerror=v=>a(v),Oe.onmessage=s0,Tn=[f,a];let d={type:"init-wasm",in:se};!d.in.wasm.wasmPaths&&(l||cn)&&(d.in.wasm.wasmPaths={wasm:new URL("ort-wasm-simd-threaded.asyncify.wasm",import.meta.url).href}),Oe.postMessage(d),gr=l}catch(d){a(d)}},a)});try{await rr(se.wasm),await nr(se),br=!0}catch(f){throw vr=!0,f}finally{Rt=!1}}},ic=async f=>{if(ht())return At(),new Promise((a,l)=>{St("init-ep",[a,l]);let p={type:"init-ep",in:{epName:f,env:se}};Oe.postMessage(p)});await or(se,f)},sc=async f=>ht()?(At(),new Promise((a,l)=>{St("copy-from",[a,l]);let p={type:"copy-from",in:{buffer:f}};Oe.postMessage(p,[f.buffer])})):Dt(f),uc=async(f,a)=>{if(ht()){if(a?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return At(),new Promise((l,p)=>{St("create",[l,p]);let d={type:"create",in:{model:f,options:{...a}}},v=[];f instanceof Uint8Array&&v.push(f.buffer),Oe.postMessage(d,v)})}else return ar(f,a)},fc=async f=>{if(ht())return At(),new Promise((a,l)=>{St("release",[a,l]);let p={type:"release",in:f};Oe.postMessage(p)});ir(f)},cc=async(f,a,l,p,d,v)=>{if(ht()){if(l.some(E=>E[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(d.some(E=>E))throw new Error("pre-allocated output tensor is not supported for proxy.");return At(),new Promise((E,S)=>{St("run",[E,S]);let I=l,L={type:"run",in:{sessionId:f,inputIndices:a,inputs:I,outputIndices:p,options:v}};Oe.postMessage(L,fr(I))})}else return sr(f,a,l,p,d,v)},lc=async f=>{if(ht())return At(),new Promise((a,l)=>{St("end-profiling",[a,l]);let p={type:"end-profiling",in:f};Oe.postMessage(p)});ur(f)}});var dc,u0,Tr,pc=q(()=>{"use strict";Ze();Sn();dt();er();yn();dc=(f,a)=>{switch(f.location){case"cpu":return[f.type,f.dims,f.data,"cpu"];case"gpu-buffer":return[f.type,f.dims,{gpuBuffer:f.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[f.type,f.dims,{mlTensor:f.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${f.location} for ${a()}`)}},u0=f=>{switch(f[3]){case"cpu":return new De(f[0],f[2],f[1]);case"gpu-buffer":{let a=f[0];if(!pr(a))throw new Error(`not supported data type: ${a} for deserializing GPU tensor`);let{gpuBuffer:l,download:p,dispose:d}=f[2];return De.fromGpuBuffer(l,{dataType:a,dims:f[1],download:p,dispose:d})}case"ml-tensor":{let a=f[0];if(!hr(a))throw new Error(`not supported data type: ${a} for deserializing MLTensor tensor`);let{mlTensor:l,download:p,dispose:d}=f[2];return De.fromMLTensor(l,{dataType:a,dims:f[1],download:p,dispose:d})}default:throw new Error(`invalid data location: ${f[3]}`)}},Tr=class{async fetchModelAndCopyToWasmMemory(a){return sc(await kt(a))}async loadModel(a,l){ut();let p;typeof a=="string"?p=await this.fetchModelAndCopyToWasmMemory(a):p=a,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await uc(p,l),ft()}async dispose(){return fc(this.sessionId)}async run(a,l,p){ut();let d=[],v=[];Object.entries(a).forEach(M=>{let _=M[0],F=M[1],V=this.inputNames.indexOf(_);if(V===-1)throw new Error(`invalid input '${_}'`);d.push(F),v.push(V)});let E=[],S=[];Object.entries(l).forEach(M=>{let _=M[0],F=M[1],V=this.outputNames.indexOf(_);if(V===-1)throw new Error(`invalid output '${_}'`);E.push(F),S.push(V)});let I=d.map((M,_)=>dc(M,()=>`input "${this.inputNames[v[_]]}"`)),L=E.map((M,_)=>M?dc(M,()=>`output "${this.outputNames[S[_]]}"`):null),B=await cc(this.sessionId,v,I,S,L,p),C={};for(let M=0;M<B.length;M++)C[this.outputNames[S[M]]]=E[M]??u0(B[M]);return ft(),C}startProfiling(){}endProfiling(){lc(this.sessionId)}}});var mc={};Ct(mc,{OnnxruntimeWebAssemblyBackend:()=>Er,initializeFlags:()=>hc,wasmBackend:()=>f0});var hc,Er,f0,yc=q(()=>{"use strict";Ze();Sn();pc();hc=()=>{(typeof se.wasm.initTimeout!="number"||se.wasm.initTimeout<0)&&(se.wasm.initTimeout=0);let f=se.wasm.simd;if(typeof f!="boolean"&&f!==void 0&&f!=="fixed"&&f!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${f}". Reset it to \`false\` and ignore SIMD feature checking.`),se.wasm.simd=!1),typeof se.wasm.proxy!="boolean"&&(se.wasm.proxy=!1),typeof se.wasm.trace!="boolean"&&(se.wasm.trace=!1),typeof se.wasm.numThreads!="number"||!Number.isInteger(se.wasm.numThreads)||se.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)se.wasm.numThreads=1;else{let a=typeof navigator>"u"?en("node:os").cpus().length:navigator.hardwareConcurrency;se.wasm.numThreads=Math.min(4,Math.ceil((a||1)/2))}},Er=class{async init(a){hc(),await ac(),await ic(a)}async createInferenceSessionHandler(a,l){let p=new Tr;return await p.loadModel(a,l),p}},f0=new Er});Ze();Ze();Ze();var Af="1.23.0";var ug=sn;{let f=(yc(),Xt(mc)).wasmBackend;it("webgpu",f,5),it("webnn",f,5),it("cpu",f,10),it("wasm",f,10)}Object.defineProperty(se.versions,"web",{value:Af,enumerable:!0});export{Ry as InferenceSession,yf as TRACE,Je as TRACE_EVENT_BEGIN,Xe as TRACE_EVENT_END,ut as TRACE_FUNC_BEGIN,ft as TRACE_FUNC_END,De as Tensor,ug as default,se as env,it as registerBackend};
//# sourceMappingURL=ort.webgpu.bundle.min.mjs.map
